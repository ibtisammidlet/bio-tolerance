"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[99638],{334007:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.ConflictError=void 0;t.sync=function(e,t,n){return p.apply(this,arguments)};var r=a(n(636602)),u=a(n(791548)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(324033)),o=n(770348);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,u,l,o){try{var i=e[l](o),a=i.value}catch(e){n(e);return}
i.done?t(a):Promise.resolve(a).then(r,u)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){s(l,r,u,o,i,"next",e)}function i(e){s(l,r,u,o,i,"throw",e)}o(void 0)}))}}var d=new u.default("CloudSync"),f=function(e){this.message=e};t.ConflictError=f;function p(){return(p=c(regeneratorRuntime.mark((function e(t,n,u){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===u&&(u=null);r.default.dispatch({type:"GAME_CLOUD_SYNC_START",applicationId:t,branchId:n});e.prev=2;e.next=5;return l.syncApplication(t,n,u);case 5:if((i=e.sent).type!==o.CloudSyncResultTypes.CONFLICT){e.next=11;break}r.default.dispatch({type:"GAME_CLOUD_SYNC_CONFLICT",applicationId:t,branchId:n,next:i.next,remote:i.remote});throw new f("Conflict in cloud sync.");case 11:i.type!==o.CloudSyncResultTypes.PULL&&i.type!==o.CloudSyncResultTypes.PUSH||d.info("Sync complete",i);case 12:e.next=21;break;case 14:e.prev=14
;e.t0=e.catch(2);if(!(e.t0 instanceof f)){e.next=18;break}throw e.t0;case 18:r.default.dispatch({type:"GAME_CLOUD_SYNC_ERROR",applicationId:t,branchId:n});d.error("Failed to cloud sync:",e.t0);throw new Error("Failed to cloud sync.");case 21:r.default.dispatch({type:"GAME_CLOUD_SYNC_COMPLETE",applicationId:t,branchId:n});return e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}},505437:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,u=(r=n(636602))&&r.__esModule?r:{default:r};var l={updateChannelDimensions:function(e,t,n,r,l){u.default.wait((function(){u.default.dispatch({type:"UPDATE_CHANNEL_DIMENSIONS",channelId:e,scrollTop:t,scrollHeight:n,offsetHeight:r});null!=l&&l()}))},updateChannelListScroll:function(e,t){u.default.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:e,scrollTop:t})},channelListScrollTo:function(e,t){u.default.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:e,
scrollTo:t})},clearChannelListScrollTo:function(e){u.default.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:e,scrollTo:null})},clearChannelDimensions:function(e,t){this.updateChannelDimensions(e,null,null,null,t)},updateGuildListScrollTo:function(e){u.default.dispatch({type:"UPDATE_GUILD_LIST_DIMENSIONS",scrollTop:e})}};t.default=l},107974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.playApplication=M;var r,u=g(n(667294)),l=A(n(730381)),o=A(n(536211)),i=g(n(334007)),a=A(n(234161)),s=A(n(288356)),c=A(n(223367)),d=A(n(956117)),f=A(n(530250)),p=A(n(662197)),y=n(3400),h=n(194322),_=A(n(308920)),v=n(770348),C=A(n(247001)),m=A(n(184804)),R=A(n(380203));function A(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t)
;if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}function T(){T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return T.apply(this,arguments)}function E(e,t,n,r,u,l,o){try{var i=e[l](o),a=i.value}catch(e){n(e);return}i.done?t(a):Promise.resolve(a).then(r,u)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){E(l,r,u,o,i,"next",e)}function i(e){E(l,r,u,o,i,"throw",e)}o(void 0)}))}}function I(e,t,n,u){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={
children:void 0}),1===o)t.children=u;else if(o>1){for(var i=new Array(o),a=0;a<o;a++)i[a]=arguments[a+3];t.children=i}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}var N=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;b(e,t)}(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];(t=e.call.apply(e,[this].concat(r))||this).onClose=function(){t.props.onClose()};t.handlePlay=function(e,n){void 0===e&&(e=!0);void 0===n&&(n=null);var r=t.props,u=r.libraryApplication,l=r.analyticsParams;t.onClose();M(u.id,u,{analyticsParams:l,cloudSync:e,cloudSyncForceHash:n})};t.handleChooseDownload=function(){var e=t.props.cloudSyncState;e.type===v.CloudSyncStateTypes.CONFLICT&&t.handlePlay(!0,e.remote.hash)}
;t.handleChooseUpload=function(){var e=t.props.cloudSyncState;e.type===v.CloudSyncStateTypes.CONFLICT&&t.handlePlay(!0,e.next.hash)};return t}var n=t.prototype;n.renderConflictButton=function(e,t,n,r){return I(d.default,{className:m.default.conflictButton,innerClassName:m.default.conflictButtonInner,onClick:r},void 0,I("div",{className:n}),I("div",{className:m.default.buttonBody},void 0,I("div",{className:m.default.conflictTitle},void 0,e),I("div",{},void 0,C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_LAST_MODIFIED),I("div",{className:m.default.timestamp},void 0,(0,l.default)(t).calendar())))};n.renderError=function(){var e=this,t=this.props.application;return I(u.Fragment,{},void 0,I(y.ModalContent,{},void 0,I(f.default,{justify:f.default.Justify.CENTER},void 0,I("div",{className:m.default.errorArt})),I("div",{className:m.default.description},void 0,C.default.Messages.CLOUD_SYNC_MODAL_ERROR_DESCRIPTION.format({applicationName:t.name}))),I(y.ModalFooter,{},void 0,I(f.default,{
justify:f.default.Justify.BETWEEN},void 0,I(d.default,{className:m.default.linkButton,size:m.default.linkButtonSize,look:d.default.Looks.LINK,color:d.default.Colors.PRIMARY,onClick:this.onClose},void 0,C.default.Messages.CANCEL),I(f.default,{direction:f.default.Direction.HORIZONTAL,justify:f.default.Justify.END},void 0,I(d.default,{look:d.default.Looks.LINK,color:d.default.Colors.PRIMARY,onClick:function(){return e.handlePlay()},className:m.default.retryButton},void 0,C.default.Messages.RETRY),I(d.default,{onClick:function(){return e.handlePlay(!1)}},void 0,C.default.Messages.GAME_ACTION_BUTTON_PLAY)))))};n.renderConflict=function(){var e=this.props,t=e.application,n=e.cloudSyncState;if(n.type!==v.CloudSyncStateTypes.CONFLICT)throw new Error("Cannot render conflict for non conflict type");return I(y.ModalContent,{className:R.default.marginBottom20},void 0,I("div",{className:m.default.description},void 0,C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_DESCRIPTION.format({
applicationName:t.name})),this.renderConflictButton(C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_DOWNLOAD,n.remote.timestamp,m.default.conflictDownloadArt,this.handleChooseDownload),I(f.default,{className:m.default.choiceWrapper,align:f.default.Align.CENTER},void 0,I("div",{className:m.default.choiceLine}),I("div",{className:m.default.choiceTitle},void 0,C.default.Messages.CLOUD_SYNC_MODAL_OR),I("div",{className:m.default.choiceLine})),this.renderConflictButton(C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_UPLOAD,n.next.timestamp,m.default.conflictUploadArt,this.handleChooseUpload))};n.render=function(){var e=this.props,t=e.cloudSyncState,n=e.transitionState,r=t.type===v.CloudSyncStateTypes.CONFLICT?C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_HEADER:C.default.Messages.CLOUD_SYNC_MODAL_ERROR_HEADER;return I(y.ModalRoot,{transitionState:n,className:m.default.modal,"aria-label":r},void 0,I(y.ModalHeader,{separator:!1},void 0,I(y.ModalCloseButton,{
className:m.default.closeButton,onClick:this.onClose}),I(p.default,{tag:p.default.Tags.H2,className:R.default.marginReset},void 0,r)),t.type===v.CloudSyncStateTypes.CONFLICT?this.renderConflict():this.renderError())};return t}(u.PureComponent);N.displayName="CloudSyncResolutionModal";var L=o.default.connectStores([c.default,s.default],(function(e){var t=e.libraryApplication,n=e.branchId;return{cloudSyncState:c.default.getState(t.id,n),application:s.default.getGame(t.id)}}))(N);function M(e,t,n){return P.apply(this,arguments)}function P(){return(P=S(regeneratorRuntime.mark((function e(t,n,r){var l,o,c,d,f,p,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(l=s.default.getGame(t))){e.next=3;break}return e.abrupt("return");case 3:o=r.cloudSync,c=void 0===o||o,d=r.cloudSyncForceHash,f=void 0===d?null:d,p=r.analyticsParams;if(!c||null==n){e.next=15;break}y=n.branchId;e.prev=6;e.next=9;return i.sync(n.id,y,f);case 9:e.next=15;break;case 11:e.prev=11
;e.t0=e.catch(6);(0,h.openModal)((function(e){return u.createElement(L,T({libraryApplication:n,analyticsParams:p,branchId:y},e))}));return e.abrupt("return");case 15:_.default.track(v.AnalyticEvents.APPLICATION_OPENED,T({application_id:l.id,application_name:l.name,type:v.AnalyticsGameOpenTypes.LAUNCH,distributor:null!=n?n.getDistributor():null},p));return e.abrupt("return",a.default.launch(l.id,null==n?void 0:n.branchId));case 17:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}},221107:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.QUICKSWITCHER_SHOW=void 0;var r,u=n(835282),l=(r=n(122913))&&r.__esModule?r:{default:r};var o={binds:["mod+k","mod+t"],comboKeysBindGlobal:!0,action:function(){l.default.hasLayers()||(0,u.show)();return!1}};t.QUICKSWITCHER_SHOW=o},497677:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.TOGGLE_HOTKEYS=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(r,l,i):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(499816)),u=n(194322),l=n(140020);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var i={binds:["mod+/","mod+shift+/"],comboKeysBindGlobal:!0,action:function(){(0,u.hasModalOpen)(l.KEYBOARD_SHORTCUT_MODAL_KEY)?r.hide():r.show();return!1}};t.TOGGLE_HOTKEYS=i;var a={TOGGLE_HOTKEYS:i};t.default=a},925689:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=A(n(496486)),u=A(n(120053)),l=function(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(567186)),o=A(n(539563)),i=A(n(676614)),a=A(n(644263)),s=A(n(126208)),c=n(517286),d=A(n(290629)),f=A(n(728429)),p=A(n(424956)),y=A(n(895201)),h=A(n(608417)),_=A(n(942192)),v=A(n(74978)),C=n(176548),m=n(770348);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function A(e){return e&&e.__esModule?e:{default:e}}function O(){O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return O.apply(this,arguments)}
function g(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=E(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=Object.freeze({});function b(e,t){void 0===e&&(e=0);return 1e3*e*(null!=t?t:1)}function N(e,t){if(!t.frecencyBoosters)return{};var n=s.default.getFrequently(),r=n.reduce((function(e,t){var n=t.id,r=s.default.getScore(n);return r>e?r:e}),0),u=[];switch(e){case C.AutocompleterResultTypes.GUILD:u=n.filter((function(e){return e instanceof o.default}));break;case C.AutocompleterResultTypes.USER:u=n.filter((function(e){return e instanceof l.default&&e.type===m.ChannelTypes.DM}));break;case C.AutocompleterResultTypes.GROUP_DM:u=n.filter((function(e){return e instanceof l.default&&e.isMultiUserDM()}));break;case C.AutocompleterResultTypes.TEXT_CHANNEL:u=n.filter((function(e){return e instanceof l.default&&(0,l.isGuildSelectableChannelType)(e.type)}));break
;case C.AutocompleterResultTypes.VOICE_CHANNEL:u=n.filter((function(e){return e instanceof l.default&&e.isGuildVocal()}))}for(var i,c={},f=T(u);!(i=f()).done;){var p=i.value,y=p.id,h=s.default.getScore(y);if(e===C.AutocompleterResultTypes.USER&&p instanceof l.default){if(p.type===m.ChannelTypes.DM)c[y=p.getRecipientId()]=1+h/r;else if(p.type===m.ChannelTypes.GROUP_DM)for(var _,v=p.recipients.length,R=T(p.recipients);!(_=R()).done;){c[_.value]=1+h/r*(1/v)}}else c[y]=1+h/r}for(var A,O=T(d.default.getFriendIDs());!(A=O()).done;){var g,E=A.value;c[E]=(null!==(g=c[E])&&void 0!==g?g:1)+.2}for(var S,I=T(a.default.getDMUserIds());!(S=I()).done;){var b,N=S.value;c[N]=(null!==(b=c[N])&&void 0!==b?b:1)+.1}return c}var L=function(){function e(e,t,n,u){var l=this;void 0===n&&(n=100);void 0===u&&(u=I);this.query="";this.options=I;this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[]
;this._linkResults=[];this._userBlacklist=null;this.parseUserResults=function(e){var t=e.results;if(l._include(C.AutocompleterResultTypes.USER)){l._userResults=[];for(var n,r=T(t);!(n=r()).done;){var u=n.value,o=u.user,i=u.id,a=u.score,s=u.comparator;null==o&&(o=f.default.getUser(i));null!=o&&l._userResults.push({type:C.AutocompleterResultTypes.USER,record:o,score:b(a),comparator:null!=s?s:void 0})}l._userResults.length>l._limit&&(l._userResults.length=l._limit);l.updateAllResults()}};this.updateAllResults=function(){clearTimeout(l._asyncTimeout);l.results=(0,r.default)([].concat(g(l._userResults),g(l._groupDMResults),g(l._textChannelResults),g(l._voiceChannelResults),g(l._guildResults),g(l._linkResults))).uniqBy((function(e){return e.type+"-"+e.record.id})).sort(v.default).value();l.onResultsChange(l.results,l.query)};this.onResultsChange=e;this.setOptions(u,!0);this._limit=n;this.userSearchContext=_.default.getSearchContext(this.parseUserResults,n);this.setResultTypes(t)}
var t=e.prototype;t.setLimit=function(e){var t=this.userSearchContext;this._limit=e;null!=t&&t.setLimit(e);this._userResults.length>this._limit&&(this._userResults.length=this._limit);this._groupDMResults.length>this._limit&&(this._groupDMResults.length=this._limit);this._textChannelResults.length>this._limit&&(this._textChannelResults.length=this._limit);this._voiceChannelResults.length>this._limit&&(this._voiceChannelResults.length=this._limit);this._guildResults.length>this._limit&&(this._guildResults.length=this._limit);this._applicationResults.length>this._limit&&(this._applicationResults.length=this._limit);this._linkResults.length>this._limit&&(this._linkResults.length=this._limit)};t.setResultTypes=function(e){this.resultTypes=null!=e?new Set(e):null;this._userResults=this._include(C.AutocompleterResultTypes.USER)?this._userResults:[];this._groupDMResults=this._include(C.AutocompleterResultTypes.GROUP_DM)?this._groupDMResults:[]
;this._textChannelResults=this._include(C.AutocompleterResultTypes.TEXT_CHANNEL)?this._textChannelResults:[];this._voiceChannelResults=this._include(C.AutocompleterResultTypes.VOICE_CHANNEL)?this._voiceChannelResults:[];this._guildResults=this._include(C.AutocompleterResultTypes.GUILD)?this._guildResults:[];this._applicationResults=this._include(C.AutocompleterResultTypes.APPLICATION)?this._applicationResults:[];this._linkResults=this._include(C.AutocompleterResultTypes.LINK)?this._linkResults:[]};t._include=function(e){return null==this.resultTypes||this.resultTypes.has(e)};t._isAsyncSearch=function(){return this._include(C.AutocompleterResultTypes.USER)};t.setOptions=function(e,t){void 0===t&&(t=!1);this.options=t?O({},this.options,{},e):e;null!=this.options.blacklist?this._userBlacklist=Array.from(this.options.blacklist).map((function(e){return e.startsWith("user:")?e.replace("user:",""):""})).filter((function(e){return""!==e})):this._userBlacklist=null};t.search=function(e,t){
this.query=e;if(""!==e.trim()){this.queryUsers(e,t,this._limit);this._groupDMResults=this.queryGroupDMs(e,this._limit);this._textChannelResults=this.queryTextChannels(e,this._limit);this._voiceChannelResults=this.queryVoiceChannels(e,this._limit);this._guildResults=this.queryGuilds(e,this._limit);this._applicationResults=this.queryApplications(e,this._limit);this._linkResults=this.queryLink(e,this._limit);if(this._isAsyncSearch()){clearTimeout(this._asyncTimeout);this._asyncTimeout=setTimeout(this.updateAllResults,300)}else this.updateAllResults()}else{this.clear();this.updateAllResults()}};t.clear=function(){var e=this.userSearchContext;null!=e&&e.clearQuery();this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[]};t.destroy=function(){var e=this.userSearchContext;if(null!=e){e.destroy();this.userSearchContext=null}};t.queryTextChannels=function(e,t){
if(!this._include(C.AutocompleterResultTypes.TEXT_CHANNEL))return[];var n=N(C.AutocompleterResultTypes.TEXT_CHANNEL,this.options),r=this.options.blacklist,u=null!=r?function(e){return!r.has("channel:"+e.id)}:void 0;return p.default.queryChannels({query:e,guildId:null,limit:t,fuzzy:!0,filter:u,boosters:n})};t.queryVoiceChannels=function(e,t){if(!this._include(C.AutocompleterResultTypes.VOICE_CHANNEL))return[];var n=this.options.voiceChannelGuildFilter;if(void 0===n)return[];var r=N(C.AutocompleterResultTypes.VOICE_CHANNEL,this.options);return p.default.queryChannels({query:e,guildId:n,limit:t,fuzzy:!0,type:c.GUILD_VOCAL_CHANNELS_KEY,boosters:r})};t.queryGuilds=function(e,t){if(!this._include(C.AutocompleterResultTypes.GUILD))return[];var n=N(C.AutocompleterResultTypes.GUILD,this.options),r=this.options.blacklist,u=null!=r?function(e){return!r.has("guild:"+e.id)}:void 0;return p.default.queryGuilds({query:e,limit:t,fuzzy:!0,filter:u,boosters:n})};t.queryUsers=function(e,t,n){
var r=this.userSearchContext;if(null!=r&&this._include(C.AutocompleterResultTypes.USER)){var u=this.options.userFilters;void 0!==t&&y.default.requestMembers(t,e,100);r.setLimit(n);r.setQuery(e,u,this._userBlacklist,N(C.AutocompleterResultTypes.USER,this.options))}};t.queryGroupDMs=function(e,t){if(!this._include(C.AutocompleterResultTypes.GROUP_DM))return[];var n=this.options.blacklist,r=N(C.AutocompleterResultTypes.GROUP_DM,this.options),u=null!=n?function(e){return!n.has("channel:"+e.id)}:void 0;return p.default.queryGroupDMs({query:e,limit:t,fuzzy:!0,filter:u,boosters:r})};t.queryApplications=function(e,t){return this._include(C.AutocompleterResultTypes.APPLICATION)?p.default.queryApplications({query:e,limit:t,fuzzy:!0}):[]};t.queryLink=function(e,t){if(!this._include(C.AutocompleterResultTypes.LINK))return[];var n,r=u.default.sanitizeUrl(e);try{n=new URL(r)}catch(e){return[]}
var l=n,o=l.pathname,a=l.hostname,s=void 0===a?"":a,c=l.host,d=h.default.isDiscordHostname(s)||window.location.host===c;return null!==o&&d&&h.default.isAppRoute(o)?[{type:C.AutocompleterResultTypes.LINK,record:i.default.fromPath(o),score:1}]:[]};return e}();t.default=L},22324:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createHeaderResult=function(e){return{type:r.AutocompleterResultTypes.HEADER,record:new r.HeaderRecord(e),score:0}};var r=n(176548)},579631:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,s){void 0===t&&(t=u.default);void 0===n&&(n=o.default);void 0===s&&(s=l.default);var c=t.getChannel(e);if(null==c)return null;var d=(0,r.computeChannelName)(c,n,s);switch(c.type){case a.ChannelTypes.DM:var f=n.getUser(c.getRecipientId());return null==f?null:{type:i.AutocompleterResultTypes.USER,record:f,score:0,comparator:d};case a.ChannelTypes.GROUP_DM:return{type:i.AutocompleterResultTypes.GROUP_DM,record:c,score:0,comparator:d}
;default:return{type:i.AutocompleterResultTypes.TEXT_CHANNEL,record:c,score:0,comparator:d}}};var r=n(678928),u=s(n(644263)),l=s(n(290629)),o=s(n(728429)),i=n(176548),a=n(770348);function s(e){return e&&e.__esModule?e:{default:e}}},10018:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,u,l){var o=u.length,i=l,a=n;if(0===o)return 0;if(null==i)i=a;else if(i===a)return a;if((a+=t===r.FindResultDirections.UP?-1:1)<0||a>=o)return e(t,a<0?o:-1,u,i);if(u[a].type===r.AutocompleterResultTypes.HEADER)return e(t,a,u,i);return a};var r=n(176548)},707791:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r={createHeaderResult:!0,findNextSelectedResult:!0,sortByMatchScore:!0};Object.defineProperty(t,"createHeaderResult",{enumerable:!0,get:function(){return o.createHeaderResult}});t.default=void 0;Object.defineProperty(t,"findNextSelectedResult",{enumerable:!0,get:function(){return i.default}});Object.defineProperty(t,"sortByMatchScore",{enumerable:!0,
get:function(){return a.default}});var u=s(n(925689)),l=n(176548);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var o=n(22324),i=s(n(10018)),a=s(n(74978));function s(e){return e&&e.__esModule?e:{default:e}}var c=u.default;t.default=c},749666:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.PRETTY_KEYS=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r)}(n(667294));var r,u=i(n(294184)),l=i(n(14096)),o=i(n(661505))
;function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t,n,u){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=u;else if(o>1){for(var i=new Array(o),a=0;a<o;a++)i[a]=arguments[a+3];t.children=i}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c="up",d="right",f="down",p="left",y=s("g",{fill:"#FFFFFF"},void 0,s("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})),h=function(e){var t=e.direction,n=void 0===t?c:t;return s("svg",{width:"10",
height:"10",xmlns:"http://www.w3.org/2000/svg",className:(0,u.default)(o.default.bindArrow,o.default[n])},void 0,y)};h.displayName="ArrowSVG";var _={mod:function(){return l.default.modKey},alt:function(){return l.default.altKey},up:function(){return s(h,{direction:c})},down:function(){return s(h,{direction:f})},left:function(){return s(h,{direction:p})},right:function(){return s(h,{direction:d})},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},plus:function(){return"+"},return:function(){return l.default.returnKey}};t.PRETTY_KEYS=_;var v=function(e){var t=e.shortcut,n=e.className,r=Array.isArray(t)?t:t.split("+");return s("div",{className:(0,u.default)(o.default.keybindShortcut,n)},void 0,r.map((function(e){return null!=_[e]?_[e]():e})).map((function(e,t){return s("span",{className:o.default.key},t,e)})))};v.displayName="KeyboardShortcut";var C=v;t.default=C},499816:(e,t,n)=>{Object.defineProperty(t,"__esModule",{
value:!0});t.hide=function(){u.default.dispatch({type:"HIDE_KEYBOARD_SHORTCUTS"})};t.show=function(){u.default.dispatch({type:"SHOW_KEYBOARD_SHORTCUTS"})};var r,u=(r=n(636602))&&r.__esModule?r:{default:r}},140020:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.KEYBOARD_SHORTCUT_MODAL_KEY=void 0;t.KEYBOARD_SHORTCUT_MODAL_KEY="KEYBOARD_SHORTCUT_MODAL_KEY"},835282:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getQuickSwitcherOptions=N;t.hide=w;t.search=function(e){u.default.dispatch(O({type:"QUICKSWITCHER_SEARCH"},N(e)))};t.selectResult=function(e){u.default.dispatch({type:"QUICKSWITCHER_SELECT",selectedIndex:e})};t.show=D;t.switchToResult=function(e){P();M(R.AnalyticEvents.QUICKSWITCHER_RESULT_SELECTED,e);var t,n=e.type,r=e.record,f={page:R.AnalyticsPages.QUICK_SWITCHER};switch(n){case a.AutocompleterResultTypes.GUILD:(0,d.transitionToGuild)(r.id);break;case a.AutocompleterResultTypes.TEXT_CHANNEL:null!=(t=p.default.getChannel(r.id))&&(0,
c.transitionToChannel)(t.id,{state:{analyticsSource:f}});break;case a.AutocompleterResultTypes.VOICE_CHANNEL:null!=(t=p.default.getChannel(r.id))&&i.default.selectVoiceChannel(r.id);break;case a.AutocompleterResultTypes.USER:l.default.openPrivateChannel([r.id]);o.default.channelListScrollTo(R.ME,r.id);break;case a.AutocompleterResultTypes.GROUP_DM:(0,c.transitionToChannel)(r.id);o.default.channelListScrollTo(R.ME,r.id);break;case a.AutocompleterResultTypes.APPLICATION:var h=y.default.getActiveLibraryApplication(r.id);E(r.id,h,{analyticsParams:{source:R.AnalyticsLocations.QUICK_SWITCHER,location:R.AnalyticsLocations.QUICK_SWITCHER}});break;case a.AutocompleterResultTypes.LINK:(0,s.default)(r.path)}u.default.dispatch({type:"QUICKSWITCHER_SWITCH_TO",result:e})};t.toggle=function(e){void 0===e&&(e="KEYBIND");m.default.isOpen()?w():D(e)};t.trackClose=M;t.trackOpen=L
;var r,u=A(n(636602)),l=A(n(709403)),o=A(n(505437)),i=A(n(136873)),a=n(707791),s=A(n(187295)),c=n(391869),d=n(95034),f=A(n(567186)),p=A(n(644263)),y=A(n(191839)),h=A(n(211136)),_=A(n(790597)),v=A(n(308920)),C=A(n(424115)),m=A(n(523946)),R=n(770348);function A(e){return e&&e.__esModule?e:{default:e}}function O(){O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return O.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,u,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){l.push(r.value);if(t&&l.length===t)break}}catch(e){i=!0;u=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw u}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(){return Promise.resolve()},S=n(409873);E=S.playApplication;var I=Object.freeze(((r={})[a.AutocompleterQuerySymbols.USER]=a.AutocompleterResultTypes.USER,r[a.AutocompleterQuerySymbols.TEXT_CHANNEL]=a.AutocompleterResultTypes.TEXT_CHANNEL,r[a.AutocompleterQuerySymbols.VOICE_CHANNEL]=a.AutocompleterResultTypes.VOICE_CHANNEL,r[a.AutocompleterQuerySymbols.GUILD]=a.AutocompleterResultTypes.GUILD,
r[a.AutocompleterQuerySymbols.APPLICATION]=a.AutocompleterResultTypes.APPLICATION,r)),b=new RegExp("^"+a.AutocompleterQuerySymbols.USER+"|"+a.AutocompleterQuerySymbols.TEXT_CHANNEL+"|"+a.AutocompleterQuerySymbols.VOICE_CHANNEL+"|\\"+a.AutocompleterQuerySymbols.GUILD+"|\\"+a.AutocompleterQuerySymbols.APPLICATION);function N(e){var t=function(e){var t,n=e.charAt(0),r=null!==(t=I[n])&&void 0!==t?t:null;return[e.replace(b,""),r]}(e),n=g(t,2);return{query:n[0],queryMode:n[1]}}function L(e){if(!m.default.isOpen()){var t,n=_.default.getGuildId(),r=h.default.getChannelId(n);if(null!=r){var u=p.default.getChannel(r);t=null!=u?u.type:null}v.default.track(R.AnalyticEvents.QUICKSWITCHER_OPENED,{source:e,current_guild_id:n,current_channel_id:r,current_channel_type:t})}}function M(e,t){var n=m.default.getProps(),r=n.results,u=n.queryMode,l=n.query,o=n.maxQueryLength,i=_.default.getGuildId(),s=h.default.getChannelId(i),c=r[(0,
a.findNextSelectedResult)(a.FindResultDirections.DOWN,-1,r)],d=C.default.isEmail(l),y=C.default.isPhoneNumber(l),R=C.default.isUserTagLike(l),A={current_channel_id:s,current_guild_id:i,query_mode:null!=u?u:"GENERAL",query_length:l.length,max_query_length:o,is_email_like:d,is_phone_like:y,is_username_like:R,query:d||y||R?null:l,top_result_type:null!=c?c.type:null,top_result_score:null!=c?c.score:null,num_results_total:m.default.getResultTotals(),num_results_users:m.default.getResultTotals(a.AutocompleterResultTypes.USER),num_results_text_channels:m.default.getResultTotals(a.AutocompleterResultTypes.TEXT_CHANNEL),num_results_voice_channels:m.default.getResultTotals(a.AutocompleterResultTypes.VOICE_CHANNEL),num_results_guilds:m.default.getResultTotals(a.AutocompleterResultTypes.GUILD),num_results_group_dms:m.default.getResultTotals(a.AutocompleterResultTypes.GROUP_DM)};if(null!=s){var O=p.default.getChannel(s);A.current_channel_type=null!=O?O.type:null}if(null!=t){
var g=t.type,T=t.score,E=t.record;A.selected_type=g;A.selected_score=T;A.selected_index=r.indexOf(t);switch(g){case a.AutocompleterResultTypes.GUILD:A.selected_guild_id=E.id;break;case a.AutocompleterResultTypes.TEXT_CHANNEL:case a.AutocompleterResultTypes.VOICE_CHANNEL:E instanceof f.default&&(A.selected_guild_id=null!=E.guild_id?E.guild_id:null);A.selected_channel_id=E.id;break;case a.AutocompleterResultTypes.GROUP_DM:A.selected_channel_id=E.id;break;case a.AutocompleterResultTypes.USER:A.selected_user_id=E.id}}v.default.track(e,A)}function P(){u.default.dispatch({type:"QUICKSWITCHER_HIDE"})}function D(e,t){void 0===e&&(e="KEYBIND");void 0===t&&(t="");L(e);u.default.dispatch(O({type:"QUICKSWITCHER_SHOW"},N(t)))}function w(){M(R.AnalyticEvents.QUICKSWITCHER_CLOSED);P()}},523946:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var r=b(n(496486)),u=b(n(972247)),l=b(n(636602)),o=I(n(707791)),i=b(n(579631)),a=b(n(19566)),s=b(n(423046)),c=b(n(644263)),d=I(n(687549)),f=I(n(517286)),p=b(n(876874)),y=b(n(30098)),h=b(n(689389)),_=b(n(191391)),v=b(n(211136)),C=b(n(790597)),m=b(n(563621)),R=b(n(871778)),A=b(n(298698)),O=b(n(424956)),g=n(71246),T=n(770348),E=b(n(247001));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function I(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}function b(e){return e&&e.__esModule?e:{default:e}}function N(e,t){
N=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return N(e,t)}function L(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P,D="seenQSTutorial",w=0,U=!1,H=!1,j=null,k=[],G=null,W=0,x=[],K=[];function q(e){var t=(0,i.default)(e);return null==t||null!=j&&j!==t.type?null:t}
function F(){var e,t,n=null!==(e=C.default.getGuildId())&&void 0!==e?e:void 0,u=null!==(t=v.default.getChannelId())&&void 0!==t?t:void 0;switch(j){case o.AutocompleterResultTypes.USER:var l=s.default.getId();return O.default.getRecentlyTalked(u,100).filter((function(e){return e.record.id!==l}));case o.AutocompleterResultTypes.APPLICATION:return O.default.queryApplications({query:"",limit:100,fuzzy:!0});case o.AutocompleterResultTypes.GUILD:return O.default.queryGuilds({query:"",limit:100,fuzzy:!0});case o.AutocompleterResultTypes.TEXT_CHANNEL:return O.default.queryChannels({query:"",guildId:C.default.getGuildId(),limit:100,fuzzy:!0});case o.AutocompleterResultTypes.VOICE_CHANNEL:return O.default.queryChannels({query:"",guildId:C.default.getGuildId(),limit:100,fuzzy:!0,filter:function(){return!0},type:f.GUILD_VOCAL_CHANNELS_KEY})}for(var i=[],p=[],y=1;y<K.length;y+=1){var R=q(K[y])
;null!=R&&((R.type!==o.AutocompleterResultTypes.TEXT_CHANNEL&&R.type!==o.AutocompleterResultTypes.VOICE_CHANNEL||h.default.can(T.Permissions.VIEW_CHANNEL,R.record))&&p.push(R))}if(p.length>0){var A;(A=i).push.apply(A,[(0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_LAST_CHANNEL)].concat(p))}var S=function(e){var t=[];d.default.getRecentlyEditedDrafts(d.DraftType.ChannelMessage).forEach((function(n){var r=n.channelId;if(!e(r)){var u=q(r);null!=u&&t.push(u)}}));return t}((function(e){return e===u||K.includes(e)}));if(S.length>0){var I;(I=i).push.apply(I,[(0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_DRAFTS)].concat(L(S)))}var b=(0,r.default)(c.default.loadAllGuildAndPrivateChannelsFromDisk()).values().concat(a.default.computeAllActiveJoinedThreads()).filter((function(e){var t=e.id;return t!==u&&!K.includes(t)&&_.default.getMentionCount(t)>0})).map((function(e){return q(e.id)})).filter(g.isNotNullish).value();if(b.length>0){i.push((0,
o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_MENTIONS));i=i.concat(b)}if(null!=n){var N=f.default.getSelectableChannelIds(n).filter((function(e){var t=c.default.getChannel(e);return!(null==t||e===u||K.includes(e)||m.default.isChannelMuted(t.guild_id,e)||null!=t.parent_id&&m.default.isChannelMuted(t.guild_id,t.parent_id))&&_.default.hasRelevantUnread(t)})).map((function(e){return q(e)})).filter((function(e){return e}));Object.values(a.default.getActiveJoinedUnreadThreadsForGuild(n)).forEach((function(e){for(var t in e){var n=q(t);null!=n&&N.push(n)}}));if(N.length>0){i.push((0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_UNREAD_CHANNELS));i=i.concat(N)}}return(0,r.default)(i).uniqBy((function(e){return e.record.id})).value()}function Y(e,t){switch(j){case o.AutocompleterResultTypes.USER:var n=y.default.getGuild(C.default.getGuildId());e.unshift((0,o.createHeaderResult)(null!=n?E.default.Messages.QUICKSWITCHER_QUERYMODE_USERS_IN_GUILD.format({name:n.name
}):E.default.Messages.QUICKSWITCHER_QUERYMODE_USERS));k=e;break;case o.AutocompleterResultTypes.TEXT_CHANNEL:e.unshift((0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS));k=e;break;case o.AutocompleterResultTypes.VOICE_CHANNEL:e.unshift((0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS));k=e;break;case o.AutocompleterResultTypes.GUILD:e.unshift((0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_QUERYMODE_GUILDS));k=e;break;case o.AutocompleterResultTypes.APPLICATION:e.unshift((0,o.createHeaderResult)(E.default.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS));k=e;break;default:k=e}if(t!==G){G=t;W=Math.max(t.length,W);w=(0,o.findNextSelectedResult)(o.FindResultDirections.DOWN,-1,k)}else{var r=k[w];null!=r&&r.type===o.AutocompleterResultTypes.HEADER&&(w=(0,o.findNextSelectedResult)(o.FindResultDirections.DOWN,w,k))}z.emitChange()}function Q(e){
var t,n,r=e.query,u=e.queryMode,l=null!==(t=C.default.getGuildId())&&void 0!==t?t:void 0,i=new Set(["user:"+s.default.getId()]);null!=l&&i.add("guild:"+l);P=null!==(n=P)&&void 0!==n?n:new o.default(B,null,null!=u?100:5,{frecencyBoosters:!0,blacklist:i});G=null;W=r.length;j=u;P.search(r)}function B(e,t){if(!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],u=t[n];if(r.record.id!==u.record.id)return!1}return!0}(e=""===(t=t.trim()).trim()?F():e,x)){x=e;Y(e,t)}}function V(){G=null;W=0;x=[];if(null!=P){P.destroy();P=null}}var z=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;N(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(p.default);this.syncWith([R.default],(function(){return!0}));U=u.default.get(D)||!1};n.isOpen=function(){return null!=P};n.getResultTotals=function(e){return null==P?0:null==e?P.results.reduce((function(e,t){
return t.type!==o.AutocompleterResultTypes.HEADER?e+1:e}),0):P.results.reduce((function(t,n){return n.type===e?t+1:t}),0)};n.channelNoticePredicate=function(e,t){var n=Date.now()-t>=T.CHANNEL_NOTICE_SHOW_DELAY;return H&&n};n.getFrequentGuilds=function(){return null!=P?P.queryGuilds("",100):null};n.getFrequentGuildsLength=function(){return null!=P?P.queryGuilds("",100).length:0};n.getProps=function(){return{theme:R.default.theme,query:null!=P?P.query:"",queryMode:j,results:k,selectedIndex:w,seenTutorial:U,maxQueryLength:W}};return t}(A.default))(l.default,{CONNECTION_OPEN:function(e){var t=e.guilds,n=e.privateChannels;H=t.length>=3||n.length>=20;x=[]},QUICKSWITCHER_SHOW:Q,SHOW_ACTION_SHEET_QUICK_SWITCHER:Q,QUICKSWITCHER_HIDE:V,OVERLAY_SET_INPUT_LOCKED:V,HIDE_ACTION_SHEET_QUICK_SWITCHER:V,QUICKSWITCHER_SEARCH:function(e){var t,n=e.query,r=e.queryMode;if(null==P)return!1;var u=null!==(t=C.default.getGuildId())&&void 0!==t?t:null;if(j!==r){var l;P.setResultTypes(null!=r?[r]:null)
;P.setLimit(null!=r?100:5);var i=null!==(l=C.default.getGuildId())&&void 0!==l?l:void 0;r===o.AutocompleterResultTypes.USER&&null!=i?P.setOptions({userFilters:{guild:i,friends:!0}},!0):r===o.AutocompleterResultTypes.VOICE_CHANNEL?P.setOptions({voiceChannelGuildFilter:null},!0):P.setOptions({userFilters:null,voiceChannelGuildFilter:void 0},!0)}j=r;P.search(n,j===o.AutocompleterResultTypes.USER?u:void 0)},QUICKSWITCHER_SELECT:function(e){w=e.selectedIndex},QUICKSWITCHER_SWITCH_TO:function(){if(U)return!1;U=!0;u.default.set(D,!0)},CHANNEL_SELECT:function(e){var t=e.channelId;if(null==t)return!1;(K=K.filter((function(e){return e!==t}))).unshift(t);K.length>4&&(K.length=4)}}),X=z;t.default=X},676614:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.LinkRecord=void 0;var r;function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)
}(t,e);t.fromPath=function(e){return new t({id:e,path:e})};function t(t){var n;(n=e.call(this)||this).id=t.id;n.path=t.path;return n}return t}(((r=n(821896))&&r.__esModule?r:{default:r}).default);t.LinkRecord=l;var o=l;t.default=o},126208:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=d(n(536211)),u=d(n(972247)),l=d(n(636602)),o=d(n(71319)),i=d(n(644263)),a=d(n(30098)),s=d(n(211136)),c=d(n(790597));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var y="selectedChannelGuildFrecency",h=new o.default({computeBonus:function(){return 100},computeWeight:function(e){var t=0;0===e?t=100:e>=1&&e<2?t=70:e>=2&&e<4?t=50:e>=4&&e<7?t=30:e>=7&&(t=10);return t},lookupKey:function(e){var t,n
;return null!==(t=null!==(n=a.default.getGuild(e))&&void 0!==n?n:i.default.getChannel(e))&&void 0!==t?t:i.default.getChannel(i.default.getDMFromUserId(e))},afterCompute:function(e){__OVERLAY__||u.default.set(y,e)},numFrequentlyItems:100,maxSamples:10}),_=null,v=null;function C(e){var t=e.guildId,n=e.channelId;if(n!==_){_=null!=n?n:null;null!=n&&h.track(n)}if(null!=t&&t!==v){v=t;h.track(t)}return!1}function m(){h.markDirty();return!1}var R=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(c.default,s.default);var e=u.default.get(y,null);null!=e&&h.overwriteHistory(e)};n.getFrequently=function(){return h.frequently};n.getScore=function(e){var t;return null!==(t=h.getFrecency(e))&&void 0!==t?t:0};n.getScoreForDM=function(e){var t=i.default.getDMFromUserId(e);return null!=t?this.getScore(t):0};n.getMaxScore=function(){return 1e3}
;n.getBonusScore=function(){return 100};n.__getLocalVars=function(){return{SELECTED_USAGE_HISTORY:y,MAX_NUM_SELECTED_ITEMS:100,MAX_SAMPLES:10,SELECTION_BONUS:100,frecency:h,lastSelected:_,lastSelectedGuild:v}};!function(e,t,n){t&&f(e.prototype,t);n&&f(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"frecency",get:function(){return h}}]);return t}(r.default.Store);R.displayName="FrecencyStore";var A=new R(l.default,{CONNECTION_OPEN:m,OVERLAY_INITIALIZE:m,VOICE_CHANNEL_SELECT:C,CHANNEL_SELECT:C});t.default=A},298698:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r;function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.channelNoticePredicate=function(e,t){0;return!1};n.__getLocalVars=function(){return{}};return t
}(((r=n(536211))&&r.__esModule?r:{default:r}).default.Store);l.displayName="ChannelNoticeStoreBase";var o=l;t.default=o},223367:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,u,l,o=v(n(536211)),i=v(n(636602)),a=_(n(334007)),s=v(n(191839)),c=v(n(834162)),d=n(811076),f=n(864489),p=_(n(324033)),y=n(770348);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}function v(e){return e&&e.__esModule?e:{default:e}}function C(e,t){
C=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return C(e,t)}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){!function(e,t){e.prototype=Object.create(t.prototype)
;e.prototype.constructor=e;C(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){f.isPlatformEmbedded&&p.init();r={};u=new Set;l=[]};n.getState=function(e,t){var n=(0,d.getComboId)(e,t);return r[n]};n.isSyncing=function(e,t){var n=(0,d.getComboId)(e,t);return u.has(n)};n.__getLocalVars=function(){return{syncStates:r,syncingComboIds:u,lastSeenDiscordApplicationIds:l}};return t}(o.default.Store);A.displayName="CloudSyncStore";var O=new A(i.default,{GAME_CLOUD_SYNC_START:function(e){var t=e.applicationId,n=e.branchId,r=(0,d.getComboId)(t,n);u.add(r)},GAME_CLOUD_SYNC_UPDATE:function(e){for(var t=e.state,n=0,u=Object.keys(t);n<u.length;n++){var l=u[n];r[l]=t[l]}},GAME_CLOUD_SYNC_COMPLETE:function(e){var t=e.applicationId,n=e.branchId,l=(0,d.getComboId)(t,n);u.delete(l);r[l]={type:y.CloudSyncStateTypes.DONE,timestamp:Date.now()};return!0},GAME_CLOUD_SYNC_CONFLICT:function(e){var t=e.applicationId,n=e.branchId,l=e.next,o=e.remote,i=(0,
d.getComboId)(t,n);r[i]={type:y.CloudSyncStateTypes.CONFLICT,next:l,remote:o};u.delete(i)},GAME_CLOUD_SYNC_ERROR:function(e){var t=e.applicationId,n=e.branchId,l=(0,d.getComboId)(t,n);r[l]={type:y.CloudSyncStateTypes.ERROR};u.delete(l)},RUNNING_GAMES_CHANGE:function(){for(var e,t=c.default.getRunningDiscordApplicationIds(),n=function(){var t=e.value,n=s.default.getActiveLibraryApplication(t);if(null==n)return"continue";i.default.wait((function(){try{a.sync(n.id,n.branchId)}catch(e){}}))},r=m(l.filter((function(e){return!t.includes(e)})));!(e=r()).done;)n();l=t;return!1}});t.default=O},324033:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.init=function(){return C.apply(this,arguments)};t.syncApplication=function(e,t,n){var l;void 0===n&&(n=null);if(!s.default.supportsCloudSync(e,t))return Promise.resolve({type:p.CloudSyncResultTypes.NONE});var o=function(){if(null==r)throw new Error("Initialize cloud sync module before syncing.");return r}(),d=s.default.getState(e,t)
;if(null==d)throw new Error("No dispatch state for "+e+":"+t);var f=null!==(l=d.storage)&&void 0!==l?l:{},y=(0,c.getComboId)(e,t),h=a.default.getToken();if(null==h)throw new Error("Cannot use cloud sync when not authenticated.");var _=null!=d.installPath?(0,i.default)(d.installPath):null;if(null==_)throw new Error("No install path for "+e+":"+t);var v=a.default.getId(),C={forceHash:n,manifestPath:p.DefaultCloudSyncConfiguration.STORAGE_MANIFEST(_,v),roots:null!=f.roots?f.roots:[{id:p.DefaultCloudSyncConfiguration.ROOT_ID,paths:Object.keys(p.DefaultCloudSyncConfiguration.ROOT_PLATFORMS).map((function(e){return{platform:e,path:p.DefaultCloudSyncConfiguration.ROOT_STORAGE_PATH(_,v)}})),patterns:p.DefaultCloudSyncConfiguration.ROOT_PATTERN}],storage:{baseURL:""+u.default.getAPIBaseURL()+p.Endpoints.APPLICATION_STORAGE(e,t),token:h},replacements:{INSTALLDIR:p.DefaultCloudSyncConfiguration.INSTALL_DIR(_),USERID:v,BRANCHID:t}};return o.sync(y,C)}
;var r,u=y(n(118915)),l=y(n(636602)),o=y(n(791548)),i=y(n(536958)),a=y(n(423046)),s=y(n(432310)),c=n(811076),d=n(864489),f=y(n(922629)),p=n(770348);function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,u,l,o){try{var i=e[l](o),a=i.value}catch(e){n(e);return}i.done?t(a):Promise.resolve(a).then(r,u)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){h(l,r,u,o,i,"next",e)}function i(e){h(l,r,u,o,i,"throw",e)}o(void 0)}))}}function v(){return d.isPlatformEmbedded&&((0,d.isOSX)()||(0,d.isWindows)())}function C(){return(C=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=2;break}return e.abrupt("return");case 2:if(v()){e.next=5;break}new o.default("CloudSyncUtils").warn("CloudSync is not supported on this platform");return e.abrupt("return");case 5:e.next=7;return f.default.ensureModule("discord_cloudsync")
;case 7:t=f.default.getCloudSync();(r=new t).on("state",(function(e){return l.default.dispatch({type:"GAME_CLOUD_SYNC_UPDATE",state:e})}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},756473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.installApplication=function(e,t,a,s,d){var p=o.default.getInstallationPath(e.id,t),y=null!=e.eulaId&&!l.default.hasAcceptedEULA(e.eulaId);null==p||y?(0,i.openModalLazy)(f(regeneratorRuntime.mark((function u(){var l,o;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:u.next=2;return Promise.all([n.e(40532),n.e(35666),n.e(81747),n.e(39217),n.e(10961),n.e(24917),n.e(20802),n.e(6379),n.e(93624),n.e(4562),n.e(94322),n.e(23046),n.e(21543),n.e(87709),n.e(54538),n.e(53301),n.e(44461),n.e(47243),n.e(38635),n.e(65905)]).then(n.bind(n,665905));case 2:l=u.sent;o=l.default;return u.abrupt("return",(function(n){return r.createElement(o,c({},n,{applicationId:e.id,branchId:t,analyticsLocation:d}))}))
;case 5:case"end":return u.stop()}}),u)})))):(0,u.installApplication)({application:e,branchId:t,buildId:a,manifestIds:s,installationPath:p,analyticsLocation:d})};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(667294)),u=n(27555),l=a(n(421558)),o=a(n(979285)),i=n(194322);function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return c.apply(this,arguments)}function d(e,t,n,r,u,l,o){try{var i=e[l](o),a=i.value}catch(e){n(e);return}i.done?t(a):Promise.resolve(a).then(r,u)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){d(l,r,u,o,i,"next",e)}function i(e){d(l,r,u,o,i,"throw",e)}o(void 0)}))}}},409873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.installApplication=y;t.performDefaultLibraryApplicationAction=function(e,t){var n=(0,i.getDefaultLibraryApplicationAction)(e,a.default,s.default),r=t.analyticsParams;switch(n){case d.LibraryApplicationActions.PLAY:return(0,u.playApplication)(e.id,e,{analyticsParams:r});case d.LibraryApplicationActions.INSTALL:return y(e.id,e.branchId,r.source);case d.LibraryApplicationActions.UPDATE:return h(e.id,e.branchId)}};Object.defineProperty(t,"playApplication",{enumerable:!0,get:function(){
return u.playApplication}});t.repairApplication=function(e,t,n){var u=l.default.getGame(e);if(null==u)return;return r.repairApplication(u,t,n)};t.updateApplication=h;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(27555)),u=n(107974),l=f(n(288356)),o=f(n(125150)),i=n(440815),a=f(n(432310)),s=f(n(693399)),c=n(756473),d=n(770348);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function y(e,t,n){var r=l.default.getGame(e);if(null!=r){
var u=o.default.getTargetBuildId(r.id,t),i=o.default.getTargetManifests(r.id,t);null!=u&&null!=i&&null!=c.installApplication&&(0,c.installApplication)(r,t,u,i,n)}}function h(e,t){var n=l.default.getGame(e);if(null!=n)return r.updateApplication(n,t,o.default.getTargetBuildId(n.id,t),o.default.getTargetManifests(n.id,t))}}}]);
//# sourceMappingURL=e5134cc15af1a6d5a3cb.js.map