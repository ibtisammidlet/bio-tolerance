"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[71667,20812],{415092:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a=n(47354),r=n(377371),l=f(n(636602)),o=f(n(845957)),i=f(n(563621)),s=f(n(351772)),u=f(n(770549)),d=n(770348),c=n(840433);function f(e){return e&&e.__esModule?e:{default:e}}var p={createChannel:function(e){var t=e.guildId,n=e.type,f=e.name,p=e.permissionOverwrites,h=void 0===p?[]:p,C=e.bitrate,E=e.userLimit,v=e.parentId,N=e.skuId,m=e.branchId;l.default.dispatch({type:"CREATE_CHANNEL_MODAL_SUBMIT"});var _={type:n,name:f,permission_overwrites:h};null!=C&&C!==d.BITRATE_DEFAULT&&(_.bitrate=C);null!=E&&E>0&&(_.user_limit=E);null!=v&&(_.parent_id=v);if(n===d.ChannelTypes.GUILD_STORE){if(null==N)throw new Error("Unexpected missing SKU");_.sku_id=N;_.branch_id=m}return s.default.post({url:d.Endpoints.GUILD_CHANNELS(t),body:_,oldFormErrors:!0,trackedActionData:{event:a.NetworkActionNames.CHANNEL_CREATE,
properties:function(e){var t,n;return(0,r.exact)({is_private:h.length>0,channel_id:null==e||null===(t=e.body)||void 0===t?void 0:t.id,channel_type:null==e||null===(n=e.body)||void 0===n?void 0:n.type})}}}).then((function(e){i.default.isOptInEnabled(t)&&u.default.updateChannelOverrideSettings(t,e.body.id,{flags:c.ChannelNotificationSettingsFlags.OPT_IN_ENABLED});o.default.checkGuildTemplateDirty(t);return e}),(function(e){l.default.dispatch({type:"CREATE_CHANNEL_MODAL_SUBMIT_FAILURE",errors:e.body});throw e}))}};t.default=p},465959:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null
;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=d(n(536211)),o=n(881100),i=d(n(359012)),s=n(967965),u=d(n(247001));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var h=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){
for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(t=e.call.apply(e,[this].concat(a))||this).handleChange=function(e){t.props.onChange(e)};return t}var n=t.prototype;n.componentDidMount=function(){var e=this.props,t=e.applicationId,n=e.branches,a=e.onHasBranchesChange;(0,o.fetchBranchesForApplication)(t);null==a||a(n.length>0)};n.componentDidUpdate=function(e){var t=this.props,n=t.onHasBranchesChange,a=t.branches.length>0;null!=n&&a!==e.branches.length>0&&n(a)};n.render=function(){var e=this.props,t=e.branches,n=e.selectedBranchId,a=e.applicationId,r=e.includeMaster,l=e.hide,o=e.className;if(0===t.length||l)return null;var i=r?t:t.filter((function(e){return e.id!==a}));return f(s.SingleSelect,{options:i.map((function(e){return{label:e.getName(a),value:e.id}})),placeholder:u.default.Messages.CREATE_STORE_CHANNEL_SELECT_BRANCH,value:n,onChange:this.handleChange,className:o})};return t}(r.Component);h.displayName="ApplicationBranchSelector";h.defaultProps={
includeMaster:!1};var C=l.default.connectStores([i.default],(function(e){var t=e.applicationId;return{branches:i.default.getBranches(t)}}))(h);t.default=C},520038:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=d(n(536211)),o=n(723420),i=d(n(399561)),s=n(967965),u=d(n(247001));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t,n,r){
a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var h=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(t=e.call.apply(e,[this].concat(a))||this).handleChange=function(e){t.props.onChange(e)};return t}var n=t.prototype;n.componentDidMount=function(){var e=this.props,t=e.applicationId,n=e.skus,a=e.selectedSkuId,r=e.onChange;null==n?(0,o.fetchSKUsForApplication)(t,!1):1===n.length&&null==a&&r(n[0].id)}
;n.componentDidUpdate=function(){var e=this.props,t=e.skus,n=e.selectedSkuId,a=e.onChange;null!=t&&1===t.length&&null==n&&a(t[0].id)};n.render=function(){var e=this.props,t=e.skus,n=e.selectedSkuId,a=e.className,r=null!=t&&0===t.length;return f(s.SingleSelect,{options:null!=t?t.map((function(e){return{label:e.name,value:e.id}})):[],placeholder:r?u.default.Messages.CREATE_STORE_CHANNEL_NO_SKUS:u.default.Messages.CREATE_STORE_CHANNEL_SELECT_SKU,value:n,onChange:this.handleChange,className:a,isDisabled:r})};return t}(r.Component);h.displayName="ApplicationSKUSelector";var C=l.default.connectStores([i.default],(function(e){var t=e.applicationId;return{skus:i.default.getForApplication(t)}}))(h);t.default=C},871667:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.AddMembers=Ie;t.default=void 0
;var a,r=Ee(n(667294)),l=he(n(294184)),o=he(n(441143)),i=he(n(496486)),s=n(47354),u=he(n(200755)),d=n(536211),c=he(n(415092)),f=he(n(415275)),p=he(n(465959)),h=he(n(520038)),C=n(81069),E=he(n(844784)),v=n(678928),N=n(289371),m=n(403575),_=n(973523),y=n(139982),g=n(365744),A=n(974797),T=n(920812),O=n(567186),S=he(n(644263)),I=he(n(288356)),M=he(n(876874)),b=he(n(30098)),R=he(n(689389)),L=he(n(290629)),P=he(n(728429)),w=he(n(151097)),D=he(n(956117)),G=n(772575),U=Ee(n(20902)),H=he(n(26172)),k=n(477537),B=he(n(567668)),F=n(645758),j=he(n(279950)),x=n(354479),Y=he(n(510596)),V=he(n(37241)),W=he(n(662197)),K=he(n(562796)),z=he(n(291555)),$=he(n(287671)),X=he(n(358584)),q=he(n(151705)),J=he(n(999720)),Q=he(n(158495)),Z=he(n(149982)),ee=he(n(482357)),te=he(n(332282)),ne=he(n(899068)),ae=n(3400),re=n(194322),le=n(598671),oe=n(967965),ie=n(319986),se=he(n(550270)),ue=n(770348),de=n(739889),ce=n(478036),fe=he(n(247001)),pe=he(n(740998));function he(e){return e&&e.__esModule?e:{default:e}}
function Ce(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ce=function(e){return e?n:t})(e)}function Ee(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Ce(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}function ve(e,t,n,a,r,l,o){try{var i=e[l](o),s=i.value}catch(e){n(e);return}i.done?t(s):Promise.resolve(s).then(a,r)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function o(e){ve(l,a,r,o,i,"next",e)}function i(e){ve(l,a,r,o,i,"throw",e)}o(void 0)}))}}function me(e,t){me=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return me(e,t)}
function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0){l.push(a.value);if(t&&l.length===t)break}}catch(e){i=!0;r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ge(){
ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return ge.apply(this,arguments)}function Ae(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var Te,Oe=Ae("br",{});function Se(e){var t=e.isPrivate,n=e.showStoreChannelOption,a=e.showAnnouncementChannelOption,l=e.canCreateStageChannel,o=e.canCreateForumChannel,i=e.hasAnyForumChannels,s=[{icon:t?z.default:K.default,label:fe.default.Messages.TEXT_CHANNEL_TYPE,value:ue.ChannelTypes.GUILD_TEXT,description:fe.default.Messages.CREATE_TEXT_CHANNEL_DESCRIPTION}]
;s.push({icon:t?ee.default:Z.default,label:fe.default.Messages.VOICE_CHANNEL_TYPE,value:ue.ChannelTypes.GUILD_VOICE,description:fe.default.Messages.CREATE_VOICE_CHANNEL_DESCRIPTION});if(o){s.push({icon:t?X.default:$.default,label:fe.default.Messages.FORUM_CHANNEL_TYPE,value:ue.ChannelTypes.GUILD_FORUM,description:Ae(F.Text,{variant:"text-sm/normal",color:"header-secondary",className:pe.default.radioLabelDescription},void 0,fe.default.Messages.FORUM_CHANNEL_DESCRIPTION,Oe,fe.default.Messages.LEARN_MORE_CLICK.format({onClick:function(){open(se.default.getArticleURL(ue.HelpdeskArticles.FORUMS))}})),isNew:!i})}a&&s.push({icon:Q.default,iconSize:24,label:fe.default.Messages.NEWS_CHANNEL_TYPE,value:ue.ChannelTypes.GUILD_ANNOUNCEMENT,description:fe.default.Messages.CREATE_NEWS_CHANNEL_DESCRIPTION});n&&s.push({icon:ne.default,iconSize:24,label:fe.default.Messages.STORE_CHANNEL_TYPE,value:ue.ChannelTypes.GUILD_STORE,description:fe.default.Messages.CREATE_STORE_CHANNEL_DESCRIPTION});l&&s.push({
icon:te.default,iconSize:24,label:fe.default.Messages.STAGE_VOICE_CHANNEL_TYPE,value:ue.ChannelTypes.GUILD_STAGE_VOICE,description:fe.default.Messages.CREATE_STAGE_CHANNEL_DESCRIPTION});return s.map((function(e){var t=e.icon,n=e.iconSize,a=e.label,l=e.value,o=e.description,i=e.isNew;return{name:Ae("div",{className:pe.default.radioItemName},void 0,r.createElement(t,ge({},null!=n?{width:n,height:n}:null,{className:pe.default.icon,background:pe.default.background,foreground:pe.default.foreground})),Ae("div",{},void 0,Ae(F.Text,{variant:"text-md/normal",className:pe.default.radioLabelName},void 0,a,i?Ae(le.TextBadge,{text:fe.default.Messages.CHANNEL_TYPE_NEW,className:pe.default.newBadge,color:u.default.BUTTON_OUTLINE_BRAND_BACKGROUND_HOVER}):null),"string"==typeof o?Ae(F.Text,{variant:"text-sm/normal",color:"header-secondary",className:pe.default.radioLabelDescription},void 0,o):o)),value:l,radioBarClassName:pe.default.radioBar,radioItemIconClassName:pe.default.radioBarIcon}}))}
!function(e){e.CHANNEL_INFO="CHANNEL_INFO";e.ADD_MEMBERS="ADD_MEMBERS"}(Te||(Te={}));function Ie(e){var t=e.onChange,n=e.guildId,a=e.channelType,l=e.description,o=_e(r.useState({}),2),i=o[0],s=o[1],u=(0,d.useStateFromStores)([b.default],(function(){return b.default.getGuild(n)})),c=a===ue.ChannelTypes.GUILD_STAGE_VOICE;r.useEffect((function(){t(i)}),[i,t]);return null==u?null:Ae(ae.ModalContent,{className:pe.default.addMembersContainer},void 0,Ae(m.AddMembersBody,{guild:u,channel:null,permission:c?g.MODERATE_STAGE_CHANNEL_PERMISSIONS:(0,O.getAccessPermissions)(a),pendingAdditions:i,setPendingAdditions:s,isStageChannel:c,description:l}))}Ie.displayName="AddMembers";function Me(e){return e===ue.ChannelTypes.GUILD_CATEGORY?fe.default.Messages.CATEGORY_NAME_PLACEHOLDER:e===ue.ChannelTypes.GUILD_FORUM?fe.default.Messages.FORUM_CHANNEL_NAME_PLACEHOLDER:fe.default.Messages.CHANNEL_NAME_PLACEHOLDER}var be=function(e){!function(e,t){e.prototype=Object.create(t.prototype)
;e.prototype.constructor=e;me(e,t)}(t,e);function t(t){var n;(n=e.call(this,t)||this).headerId=(0,x.uid)();n.setInputRef=function(e){n._input=e};n.handleNameChange=function(e){var t=n.state.channelType;O.CREATABLE_NONE_VOCAL_CHANNEL_NAME_TYPES.has(t)&&(e=(0,ie.sanitizeGuildTextChannelName)(e));n.setState({name:e})};n.handleTypeChange=function(e){var t=e.value,a=n.state.name;O.CREATABLE_NONE_VOCAL_CHANNEL_NAME_TYPES.has(t)&&(a=(0,ie.sanitizeGuildTextChannelName)(a));t===ue.ChannelTypes.GUILD_STAGE_VOICE&&n.setState({isPrivate:!1});n.setState({channelType:t,name:a})};n.handlePrivacyChange=function(e){n.setState({isPrivate:e})};n.handleApplicationChange=function(e){n.setState({applicationId:e})};n.handleSKUChange=function(e){n.setState({skuId:e})};n.handleShowBranchesToggle=function(e){n.setState({showBranches:e,branchId:null})};n.handleBranchChange=function(e){n.setState({branchId:e})};n.handleHasBranchesChange=function(e){n.setState({hasBranches:e})};n.handleSubmit=function(){
var e=Ne(regeneratorRuntime.mark((function e(t){var a,r,l,o,s,u,d,f,p,h,E,v,m,_,g,A,S,I,M,b,R,L,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();a=n.props,r=a.cloneChannel,l=a.categoryId,o=a.user,s=a.memberRoleIds,u=a.isAdmin,d=a.onClose,f=a.owner;p=n.state,h=p.name,E=p.pendingPermissionOverwrites,v=p.channelType,m=p.skuId,_=p.branchId,g=p.isPrivate;if(null!=(A=n.getGuildId())){e.next=6;break}return e.abrupt("return");case 6:if(null!=r){S=i.default.values(r.permissionOverwrites);I=r.bitrate;M=r.userLimit}else if(v===ue.ChannelTypes.GUILD_ANNOUNCEMENT)S=(0,ie.permissionOverwritesForAnnouncement)(A);else{if(g){S=(0,ie.permissionOverwritesForRoles)(A,v,[],!0);(b=(0,N.extractPermissionOverwrites)(E,v)).length>0&&(S=S.concat(b));R=null!=f&&o.id===f.id;S.some((function(e){return s.has(e.id)}))||u||R||S.push((0,ie.permissionOverwriteForUser)(o.id,v))}if(v===ue.ChannelTypes.GUILD_STAGE_VOICE){S=[];Object.values(E).forEach((function(e){
var t=e.row;null!=t.id&&""!==t.id&&(t.rowType===de.RowType.ROLE?S.push((0,T.createModeratorOverwrite)(t.id,C.PermissionOverwriteType.ROLE)):t.rowType===de.RowType.MEMBER&&S.push((0,T.createModeratorOverwrite)(t.id,C.PermissionOverwriteType.MEMBER)))}))}}n.setState({errors:{}});e.prev=8;e.next=11;return c.default.createChannel({guildId:A,type:v,name:h,permissionOverwrites:S,bitrate:I,userLimit:M,parentId:v!==ue.ChannelTypes.GUILD_CATEGORY?l:null,skuId:m,branchId:_});case 11:if(null!=(L=e.sent)&&201===L.status){e.next=14;break}return e.abrupt("return");case 14:P=L.body;O.CREATABLE_NONE_VOCAL_CHANNEL_NAME_TYPES.has(v)&&(0,y.transitionToGuild)(P.guild_id,P.id);d();e.next=22;break;case 19:e.prev=19;e.t0=e.catch(8);null!=e.t0.body&&"object"==typeof e.t0.body?n.setState({errors:e.t0.body}):n.setState({errors:{message:fe.default.Messages.ERROR_OCCURRED_TRY_AGAIN}});case 22:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(t){return e.apply(this,arguments)}}()
;var a=t.channelType,r=t.cloneChannel,l=t.prefillChannelName;n.state={channelType:null!=a?a:ue.ChannelTypes.GUILD_TEXT,name:null!=r?(0,v.computeChannelName)(r,P.default,L.default):null!=l?l:"",pendingPermissionOverwrites:{},isPrivate:!1,prevGuildId:t.guildId,applicationId:null,skuId:null,branchId:null,showBranches:!1,hasBranches:!1,slide:Te.CHANNEL_INFO,errors:{}};n.handlePermissionOverwriteChange=n.handlePermissionOverwriteChange.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n}var a=t.prototype;a.componentDidMount=function(){var e=this._input;null!=e&&e.select();var t=this.props,n=t.guildId,a=t.applications;t.canCreateStoreChannel&&null==a&&f.default.fetchApplications(n);E.default.trackWithMetadata(ue.AnalyticEvents.OPEN_MODAL,{type:"Create Channel"});_.GuildForumExperiment.trackExposure({guildId:n})};a.componentDidUpdate=function(e,t){
!t.isPrivate&&this.state.isPrivate&&this.state.channelType===ue.ChannelTypes.GUILD_ANNOUNCEMENT&&this.setState({channelType:ue.ChannelTypes.GUILD_TEXT});!t.isPrivate&&this.state.isPrivate&&E.default.trackWithMetadata(ue.AnalyticEvents.OPEN_MODAL,{type:"Create Private Channel"})};a.getGuildId=function(e){void 0===e&&(e=this.props);return e.guildId};a.canSubmit=function(){var e=this.props,t=e.canViewChannels,n=e.canConnect,a=this.state,r=a.isPrivate,l=a.channelType,o=a.skuId;return""!==a.name&&(!(r&&!(0,N.canCreatePrivateChannel)(l,t,n))&&(l!==ue.ChannelTypes.GUILD_STORE||null!=o))};a.getIconComponent=function(){var e=this.state,t=e.isPrivate,n=e.channelType;switch(n){case ue.ChannelTypes.GUILD_TEXT:return t?z.default:K.default;case ue.ChannelTypes.GUILD_FORUM:return $.default;case ue.ChannelTypes.GUILD_VOICE:return t?ee.default:Z.default;case ue.ChannelTypes.GUILD_STORE:return ne.default;case ue.ChannelTypes.GUILD_ANNOUNCEMENT:return Q.default;case ue.ChannelTypes.GUILD_STAGE_VOICE:
return te.default;default:return(0,O.isGuildTextChannelType)(n)?K.default:ce.NOOP_NULL}};a.renderHeader=function(){var e,t=this.props,n=t.cloneChannel,a=t.categoryId,r=t.onClose,l=function(e,t){return null!=e?fe.default.Messages.CLONE_CHANNEL:t===ue.ChannelTypes.GUILD_CATEGORY?fe.default.Messages.CREATE_CATEGORY:fe.default.Messages.CREATE_CHANNEL}(n,this.state.channelType);if(null!=a){var o,i=S.default.getChannel(a);e=Ae(F.Text,{variant:"text-xs/normal",color:"header-secondary",className:pe.default.subtitle},void 0,fe.default.Messages.IN_CATEGORY.format({categoryName:null!==(o=null==i?void 0:i.name)&&void 0!==o?o:""}))}return Ae(ae.ModalHeader,{separator:!1},void 0,Ae("div",{className:pe.default.header},void 0,Ae(G.Heading,{id:this.headerId,variant:"heading-lg/medium",className:pe.default.title,level:2},void 0,l),e),Ae(ae.ModalCloseButton,{onClick:r,className:pe.default.closeButton}))};a.renderName=function(){
var e,t=this.props,a=t.cloneChannel,l=t.guildId,o=this.state,i=o.errors,s=o.channelType;null!=(null==i?void 0:i.name)&&(e=Ae(F.Text,{variant:"text-xs/normal",color:"text-danger",className:pe.default.error},void 0,i.name));var u=s===ue.ChannelTypes.GUILD_CATEGORY,d=u?fe.default.Messages.CATEGORY_NAME:fe.default.Messages.FORM_LABEL_CHANNEL_NAME,c=null!=a?Ae(V.default,{className:pe.default.channelNameNote,type:V.default.Types.DESCRIPTION},void 0,fe.default.Messages.CLONE_CHANNEL_HELP.format({name:(0,v.computeChannelName)(a,P.default,L.default,!0)})):s===ue.ChannelTypes.GUILD_FORUM?Ae(V.default,{className:pe.default.channelNameNote,type:V.default.Types.DESCRIPTION},void 0,fe.default.Messages.FORUM_CHANNEL_NAME_NOTE.format({forumUpsellHook:function(e,t){return Ae(w.default,{onClick:function(){return(0,re.openModalLazy)(Ne(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2
;return Promise.all([n.e(40532),n.e(83074)]).then(n.bind(n,583074));case 2:t=e.sent;a=t.default;return e.abrupt("return",(function(e){return r.createElement(a,ge({},e,{guildId:l}))}));case 5:case"end":return e.stop()}}),e)}))))}},t,e)}})):null,f=this.getIconComponent();return Ae(Y.default,{title:d,titleClassName:pe.default.sectionTitle,className:pe.default.name},void 0,Ae(j.default,{value:this.state.name,onChange:this.handleNameChange,inputRef:this.setInputRef,maxLength:100,placeholder:Me(s),className:pe.default.inputWrapper,inputClassName:u?null:pe.default.inputInner,prefixElement:u?null:Ae(f,{className:pe.default.inputPrefix,width:16,height:16}),autoFocus:!0}),e,c)};a.renderType=function(){var e=this.props,t=e.cloneChannel,n=e.applications,a=e.canCreateStoreChannel,r=e.canCreateAnnouncementChannel,l=e.canCreateStageChannel,o=e.canCreateForumChannel,i=e.hasAnyForumChannels,s=this.state,u=s.channelType,d=s.isPrivate;if(null==t&&u!==ue.ChannelTypes.GUILD_CATEGORY){
var c=null!=n&&n.length>0;return Ae(Y.default,{className:pe.default.type},void 0,Ae(H.default,{options:Se({isPrivate:d,showStoreChannelOption:a&&c,showAnnouncementChannelOption:r,canCreateStageChannel:l,canCreateForumChannel:o,hasAnyForumChannels:i}),value:u,size:H.default.Sizes.NOT_SET,onChange:this.handleTypeChange,itemInfoClassName:pe.default.radioBarLabel}))}};a.renderChannelTypeDescription=function(e){var t;e===ue.ChannelTypes.GUILD_ANNOUNCEMENT&&(t=fe.default.Messages.FORM_HELP_NEWS.format({documentationLink:se.default.getArticleURL(ue.HelpdeskArticles.ANNOUNCEMENT_CHANNELS)}));return null==t?null:Ae(V.default,{className:pe.default.channelTypeDescription,type:V.default.Types.DESCRIPTION},void 0,t)};a.renderStoreOptions=function(){var e=this.props.applications,t=this.state,n=t.applicationId,a=t.skuId,l=t.branchId,o=t.showBranches,i=t.hasBranches;if(null==e||0===e.length)throw new Error("Unexpected empty applications");return Ae("div",{},void 0,Ae(W.default,{tag:W.default.Tags.H5
},void 0,fe.default.Messages.CREATE_STORE_CHANNEL_APPLICATION),Ae(oe.SingleSelect,{options:e.map((function(e){return{label:e.name,value:e.id}})),placeholder:fe.default.Messages.CREATE_STORE_CHANNEL_SELECT_APPLICATION,value:n,onChange:this.handleApplicationChange,className:pe.default.storeChannelOptionSelector}),null!=n?Ae(r.Fragment,{},void 0,Ae(W.default,{tag:W.default.Tags.H5},void 0,fe.default.Messages.CREATE_STORE_CHANNEL_SKU),Ae(h.default,{applicationId:n,onChange:this.handleSKUChange,selectedSkuId:a,className:pe.default.storeChannelOptionSelector},n)):null,null!=n&&i?Ae(B.default,{hideBorder:!0,onChange:this.handleShowBranchesToggle,value:o,note:fe.default.Messages.CREATE_STORE_CHANNEL_BETA_NOTE.format({devPortalUrl:ue.MarketingURLs.API_DOCS_GAME_AND_SERVER_MANAGEMENT})},void 0,Ae(q.default,{className:pe.default.switchIcon}),fe.default.Messages.CREATE_STORE_CHANNEL_BETA_TITLE):null,null!=n?Ae(r.Fragment,{},void 0,o?Ae(W.default,{tag:W.default.Tags.H5
},void 0,fe.default.Messages.CREATE_STORE_CHANNEL_BRANCH):null,Ae(p.default,{applicationId:n,onChange:this.handleBranchChange,selectedBranchId:l,hide:!o,onHasBranchesChange:this.handleHasBranchesChange,className:pe.default.storeChannelOptionSelector},n)):null)};a.renderPrivacyOptions=function(){var e=this.props.cloneChannel,t=this.state,n=t.channelType,a=t.isPrivate;if(null!=e||n===ue.ChannelTypes.GUILD_ANNOUNCEMENT)return null;var r=n===ue.ChannelTypes.GUILD_CATEGORY?fe.default.Messages.PRIVATE_CATEGORY:fe.default.Messages.PRIVATE_CHANNEL,l=n===ue.ChannelTypes.GUILD_CATEGORY?fe.default.Messages.CHANNEL_PERMISSIONS_PRIVATE_CATEGORY_DESCRIPTION:fe.default.Messages.CHANNEL_PERMISSIONS_PRIVATE_CHANNEL_DESCRIPTION_NEW;return Ae(Y.default,{},"privacy-switch",Ae(B.default,{hideBorder:!0,onChange:this.handlePrivacyChange,value:a,note:l},void 0,Ae(J.default,{className:pe.default.switchIcon}),r))};a.renderError=function(e){
var t,n=this.state,a=n.channelType,r=n.isPrivate,o=n.errors,i=this.props,s=i.canConnect,u=i.canViewChannels;if(Object.values(o).length>0){if(null!=o.message&&""!==o.message)t=o.message;else if(e||null==o.name){var d=Object.values(o)[0];d.length>0&&(t=d)}}else r&&!(0,N.canCreatePrivateChannel)(a,u,s)&&(t=(0,N.getPrivateChannelHintText)(a));if(null!=t){var c;return Ae("div",{className:(0,l.default)(pe.default.createError,(c={},c[pe.default.addMemberError]=e,c))},void 0,Ae(U.default,{messageType:U.HelpMessageTypes.ERROR},void 0,t))}};a.renderFooter=function(){var e,t=this,n=this.props,a=n.channelType,r=n.onClose,l=this.state.channelType,o=this.state.isPrivate;e=a===ue.ChannelTypes.GUILD_CATEGORY?fe.default.Messages.CREATE_CATEGORY:fe.default.Messages.CREATE_CHANNEL;var i=o||l===ue.ChannelTypes.GUILD_STAGE_VOICE;return Ae(ae.ModalFooter,{className:pe.default.modalFooter},void 0,i?Ae(D.default,{type:"button",onClick:function(){t.setState({slide:Te.ADD_MEMBERS})},disabled:!this.canSubmit()
},void 0,fe.default.Messages.NEXT):Ae(D.default,{type:"submit",disabled:!this.canSubmit()},void 0,e),Ae(D.default,{onClick:r,look:D.default.Looks.LINK,color:D.default.Colors.PRIMARY},void 0,fe.default.Messages.CANCEL))};a.renderAddMemberFooter=function(){var e,t=this,n=this.props.channelType,a=this.state.pendingPermissionOverwrites;e=0===Object.keys(a).length?fe.default.Messages.SKIP:n===ue.ChannelTypes.GUILD_CATEGORY?fe.default.Messages.CREATE_CATEGORY:fe.default.Messages.CREATE_CHANNEL;return Ae(ae.ModalFooter,{},void 0,Ae(D.default,{type:"submit",disabled:!this.canSubmit()},void 0,e),Ae(D.default,{onClick:function(){t.setState({slide:Te.CHANNEL_INFO})},look:D.default.Looks.LINK,color:D.default.Colors.PRIMARY},void 0,fe.default.Messages.BACK))};a.handlePermissionOverwriteChange=function(e){this.setState({pendingPermissionOverwrites:e})};a.renderCreateChannelContent=function(){var e=this.state.channelType;return r.createElement(r.Fragment,null,this.renderHeader(),Ae(ae.ModalContent,{
className:pe.default.modalContent},void 0,this.renderType(),this.renderName(),e===ue.ChannelTypes.GUILD_STORE?this.renderStoreOptions():null,this.renderChannelTypeDescription(e),e===ue.ChannelTypes.GUILD_STAGE_VOICE?null:this.renderPrivacyOptions()),this.renderError(),this.renderFooter())};a.renderAddMemberSlideContent=function(){var e=this.state,t=e.name,n=e.channelType,a=this.props,l=a.guildId,o=a.onClose,i=this.getIconComponent(),s=n===ue.ChannelTypes.GUILD_STAGE_VOICE;return r.createElement(r.Fragment,null,Ae(ae.ModalHeader,{separator:!1},void 0,Ae("div",{className:pe.default.header},void 0,Ae(G.Heading,{variant:"heading-lg/medium",className:pe.default.title,level:2},void 0,s?fe.default.Messages.CHANNEL_PERMISSIONS_ADD_MODERATOR_TITLE:fe.default.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE),Ae(F.Text,{variant:"text-xs/normal",color:"header-secondary",className:pe.default.subtitle},void 0,Ae(i,{height:16,width:16,className:pe.default.subtitleIcon}),t)),Ae(ae.ModalCloseButton,{
onClick:o,className:pe.default.closeButton})),this.renderError(!0),Ae(Ie,{onChange:this.handlePermissionOverwriteChange,guildId:l,channelType:n}),this.renderAddMemberFooter())};a.renderSlides=function(){var e=this.state.slide,t={impression_group:s.ImpressionGroups.CHANNEL_ADD_FLOW};return Ae("div",{},void 0,Ae(k.Slides,{activeSlide:e,width:460},void 0,Ae(k.Slide,{id:Te.CHANNEL_INFO,impressionName:s.ImpressionNames.CHANNEL_ADD_INFO,impressionProperties:t},void 0,this.renderCreateChannelContent()),Ae(k.Slide,{id:Te.ADD_MEMBERS,impressionName:s.ImpressionNames.CHANNEL_ADD_MEMBERS,impressionProperties:t},void 0,this.renderAddMemberSlideContent())))};a.render=function(){var e=this.props.transitionState;return Ae("form",{onSubmit:this.handleSubmit},void 0,Ae(ae.ModalRoot,{transitionState:e,className:pe.default.modal,"aria-labelledby":this.headerId},void 0,this.renderSlides()))};return t}(r.PureComponent);be.displayName="CreateChannel";var Re=r.forwardRef((function(e,t){
var n=e.channelType,a=e.guildId,l=e.cloneChannelId,s=(0,d.useStateFromStoresObject)([b.default,P.default,R.default,S.default,I.default,M.default],(function(){var e,t,r,i=b.default.getGuild(a),s=P.default.getCurrentUser();(0,o.default)(null!=s,"CreateChannel: user cannot be undefined");var u=null!=i&&null!=i.ownerId?P.default.getUser(i.ownerId):null,d=new Set(null!==(e=null===(t=M.default.getMember(a,s.id))||void 0===t?void 0:t.roles)&&void 0!==e?e:[]),c=R.default.can(ue.Permissions.ADMINISTRATOR,i),f=S.default.getChannel(l);return{applications:I.default.getApplicationsForGuild(a),canCreateStoreChannel:null!=i&&i.hasFeature(ue.GuildFeatures.COMMERCE),canCreateAnnouncementChannel:null!=i&&i.hasFeature(ue.GuildFeatures.NEWS),user:s,owner:u,memberRoleIds:d,canViewChannels:R.default.can(ue.Permissions.VIEW_CHANNEL,i),canConnect:R.default.can(ue.Permissions.CONNECT,i),isAdmin:c,cloneChannel:f,channelType:null!==(r=null==f?void 0:f.type)&&void 0!==r?r:n,
canManageRoles:R.default.can(ue.Permissions.MANAGE_ROLES,i),canManageChannels:R.default.can(ue.Permissions.MANAGE_CHANNELS,i)}})),u=r.useMemo((function(){return(0,i.default)(S.default.getMutableGuildChannelsForGuild(a)).values().some((function(e){return e.isForumChannel()}))}),[a]),c=s.canManageRoles,f=s.canManageChannels,p=(0,A.useGuildEligibleForStageChannels)(a)&&c&&f,h=(0,_.useCanCreateForumChannel)(a);return r.createElement(be,ge({},e,s,{canCreateStageChannel:p,canCreateForumChannel:h,hasAnyForumChannels:u,ref:t}))}));t.default=Re},920812:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createModeratorOverwrite=R;t.default=P;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){
var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=n(536211),o=n(804394),i=n(327269),s=n(81069),u=n(403575),d=T(n(644263)),c=T(n(30098)),f=T(n(956117)),p=T(n(530250)),h=n(772575),C=n(645758),E=n(354479),v=T(n(332282)),N=n(3400),m=T(n(656016)),_=n(365744),y=n(739889),g=T(n(247001)),A=T(n(102437));function T(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function S(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,
_owner:null}}function I(e,t,n,a,r,l,o){try{var i=e[l](o),s=i.value}catch(e){n(e);return}i.done?t(s):Promise.resolve(s).then(a,r)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0){l.push(a.value);if(t&&l.length===t)break}}catch(e){i=!0;r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function R(e,t){return{id:e,type:t,deny:m.default.NONE,allow:_.MODERATE_STAGE_CHANNEL_PERMISSIONS}}function L(e,t){var n=Object.values(t).filter((function(e){return null!=e.row.id})).map((function(e){var t=e.row;return t.rowType===y.RowType.ROLE?R(t.id,s.PermissionOverwriteType.ROLE):R(t.id,s.PermissionOverwriteType.MEMBER)}));return(0,o.savePermissionUpdates)(e.id,n,!0)}function P(e){var t=e.transitionState,n=e.onClose,a=e.channelId,o=(0,E.useUID)(),s=(0,l.useStateFromStores)([d.default],(function(){return d.default.getChannel(a)})),m=(0,l.useStateFromStores)([c.default],(function(){return c.default.getGuild(null==s?void 0:s.getGuildId())})),y=M(r.useState({}),2),T=y[0],O=y[1],b=M(r.useState(!1),2),R=b[0],P=b[1],w=M(r.useState(null),2),D=w[0],G=w[1];if(null==s||null==m)return null;var U=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t
;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!0);e.prev=1;e.next=4;return L(s,T);case 4:n();e.next=12;break;case 7:e.prev=7;e.t0=e.catch(1);t=new i.APIError(e.t0);P(!1);G(t);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function o(e){I(l,a,r,o,i,"next",e)}function i(e){I(l,a,r,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return S(N.ModalRoot,{transitionState:t,"aria-labelledby":o,size:N.ModalSize.SMALL,className:A.default.modalRoot},void 0,S(N.ModalHeader,{separator:!1,direction:p.default.Direction.VERTICAL,align:p.default.Align.CENTER,className:A.default.header},void 0,S(h.Heading,{variant:"heading-xl/medium",level:2},void 0,g.default.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE),S(C.Text,{variant:"text-md/normal",color:"header-secondary",className:A.default.headerSubtitle},void 0,S(v.default,{height:16,width:16,
className:A.default.headerSubtitleIcon}),s.name)),S(u.AddMembersBody,{guild:m,channel:s,permission:_.MODERATE_STAGE_CHANNEL_PERMISSIONS,pendingAdditions:T,setPendingAdditions:O}),null!=D?S(C.Text,{className:A.default.error,variant:"text-xs/normal",color:"text-danger"},void 0,D.getAnyErrorMessage()):null,S(N.ModalFooter,{},void 0,S(f.default,{onClick:U,submitting:R},void 0,g.default.Messages.ADD),S(f.default,{look:f.default.Looks.LINK,color:f.default.Colors.PRIMARY,onClick:n},void 0,g.default.Messages.CANCEL)))}P.displayName="AddModeratorsModal"},359012:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a=l(n(536211)),r=l(n(636602));function l(e){return e&&e.__esModule?e:{default:e}}function o(e,t){o=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return o(e,t)}var i={};var s=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;o(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype
;n.getBranches=function(e){var t;return null!==(t=i[e])&&void 0!==t?t:[]};n.__getLocalVars=function(){return{applicationBranches:i}};return t}(a.default.Store);s.displayName="ApplicationBranchStore";var u=new s(r.default,{OWNED_APPLICATION_BRANCHES_FETCH_SUCCESS:function(e){var t=e.applicationId,n=e.branches;i[t]=n},LOGOUT:function(){i={}}});t.default=u}}]);
//# sourceMappingURL=f3d6b335e4826019971b.js.map