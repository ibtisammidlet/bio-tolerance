"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[39447],{651510:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useActiveGuildThreads=function(e){var t=(0,u.useStateFromStoresArray)([f.default,v.default,l.default],(function(){return(0,a.default)(v.default.getThreadsForGuild(e)).values().map((function(e){return a.default.values(e)})).flatten().map((function(e){var t=e.id;return l.default.getChannel(t)})).filter(s.isNotNullish).filter((function(e){return f.default.can(g.Permissions.VIEW_CHANNEL,e)})).map((function(e){return e.id})).value()}),[]);return n.useMemo((function(){return(0,a.default)(t).sort((function(e,t){return c.default.compare(d.default.lastMessageId(e),d.default.lastMessageId(t))})).reverse().value()}),[t])};t.useActiveThreadIds=M;t.useActiveThreads=function(e){var t=M(e),r=T((0,u.useStateFromStores)([h.default],(function(){return a.default.partition(t,(function(e){return h.default.hasJoined(e)}))
}),[t],u.statesWillNeverBeEqual),2),n=r[0],o=r[1];return{joinedThreadIds:n,unjoinedThreadIds:o}};t.useArchivedThreads=function(e,t,r){var d=(0,u.useStateFromStores)([i.default],(function(){return i.default.isConnected()})),s=(0,u.useStateFromStoresObject)([p.default],(function(){return{loading:p.default.isLoading(e.id,t,r),canLoadMore:p.default.canLoadMore,nextOffset:p.default.nextOffset}})),c=s.canLoadMore,v=s.loading,h=s.nextOffset,y=n.useCallback((function(){f.default.can(g.Permissions.READ_MESSAGE_HISTORY,e)&&m.default.loadArchivedThreads(e.guild_id,e.id,t,r,h)}),[e,t,r,h]),S=T(n.useState(!0),2),b=S[0],_=S[1];n.useEffect((function(){if(d){_(!1);y()}}),[e.id,t,r,d]);n.useEffect((function(){o.default.resort(e.id)}),[e.id]);return{threadIds:(0,u.useStateFromStoresArray)([p.default,l.default,f.default],(function(){return(0,a.default)(p.default.getThreads(e.id,t,r)).filter((function(e){var t=l.default.getChannel(e);return null!=t&&f.default.can(g.Permissions.VIEW_CHANNEL,t)})).value()
})),canLoadMore:c,loading:v||b,loadMore:y}};t.useTrackThreadBrowserTab=function(){n.useEffect((function(){(0,y.trackThreadBrowserTab)()}),[])};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),a=S(r(496486)),u=r(536211),o=S(r(649563)),l=S(r(644263)),i=S(r(23535)),f=S(r(689389)),d=S(r(191391)),s=r(71246),c=S(r(71636)),v=S(r(782270)),p=S(r(612548)),h=S(r(730451)),m=S(r(887174)),y=r(566142),g=r(478036);function S(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}
function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,u=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done);o=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){l=!0;a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return u}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e){
var t=(0,u.useStateFromStoresArray)([f.default,v.default,l.default],(function(){return(0,a.default)(v.default.getThreadsForParent(e.guild_id,e.id)).values().map((function(e){var t=e.id;return l.default.getChannel(t)})).filter(s.isNotNullish).filter((function(e){return f.default.can(g.Permissions.VIEW_CHANNEL,e)})).map((function(e){return e.id})).value()}),[]);return n.useMemo((function(){return(0,a.default)(t).sort((function(e,t){return c.default.compare(d.default.lastMessageId(e),d.default.lastMessageId(t))})).reverse().value()}),[t])}},789317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=p;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null
;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=s(r(294184)),o=s(r(521358)),l=s(r(895377)),i=s(r(903086)),f=s(r(247001)),d=s(r(610687));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function v(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var l=new Array(o),i=0;i<o;i++)l[i]=arguments[i+3];t.children=l}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function p(e){var t=e.channel,r=e.threadIds,n=e.startThread,s=e.gotoThread,c=a.useCallback((function(e){return v(i.default,{threadId:r[e.row],gotoThread:s},e.section+"-"+e.row)}),[r,s])
;return 0===r.length?v(l.default,{channel:t,header:f.default.Messages.THREAD_BROWSER_EMPTY_STATE_HEADER,startThread:n}):v(o.default,{className:(0,u.default)(d.default.list,d.default.activeThreadsList),fade:!0,sections:[r.length],sectionHeight:0,rowHeight:80,renderRow:c,renderSection:function(){return null},chunkSize:20})}p.displayName="SearchThreadsTab"},39447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=k;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n
}(r(667294)),u=w(r(294184)),o=r(536211),l=r(391869),i=w(r(689389)),f=w(r(956117)),d=w(r(16941)),s=r(772575),c=w(r(665759)),v=w(r(259530)),p=w(r(830759)),h=w(r(887174)),m=r(819235),y=r(566142),g=w(r(789317)),S=w(r(911163)),b=r(682640),T=r(64072),_=r(770348),M=w(r(247001)),E=w(r(386545));function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function A(e,t,r,n,a,u,o){try{var l=e[u](o),i=l.value}catch(e){r(e);return}l.done?t(i):Promise.resolve(i).then(n,a)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,u=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done);o=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){l=!0;a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return u}(e,t)||function(e,t){
if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var l=new Array(o),i=0;i<o;i++)l[i]=arguments[i+3];t.children=l}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}
var j=R(v.default,{});function k(e){var t,r,n,c,v,w,O,P,k,C,x,D,W,H,F,B,L=e.channel,$=e.className,z=e.onClose,V=(0,o.useStateFromStores)([i.default],(function(){return i.default.can(_.Permissions.READ_MESSAGE_HISTORY,L)})),G=(0,m.useCanStartThread)(L),U=function(){z();(0,b.openThreadSidebarForCreating)(L,void 0,"Thread Browser Empty State")},Y=a.useCallback((function(e,t){z();t?(0,b.openThreadSidebarForViewing)(e):(0,l.transitionToThread)(e,T.OpenThreadAnalyticsLocations.BROWSER)}),[z]),q=(t=L.guild_id,r=L.id,n=N(a.useState(""),2),c=n[0],v=n[1],w=N(a.useState(!1),2),O=w[0],P=w[1],k=N(a.useState(!1),2),C=k[0],x=k[1],D=N(a.useState([]),2),W=D[0],H=D[1],F=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=c&&""!==c){e.next=2;break}return e.abrupt("return");case 2:if(!O){e.next=4;break}return e.abrupt("return");case 4:P(!0);e.prev=5;e.next=8;return h.default.searchThreads(t,r,c);case 8:
n=e.sent;x(!0);H(n);case 11:e.prev=11;P(!1);return e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[5,,11,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function o(e){A(u,n,a,o,l,"next",e)}function l(e){A(u,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}(),B=function(e){v(e);0===e.length&&x(!1)},{query:c,setQuery:B,isLoading:O,hasResults:C,submit:F,results:W});a.useEffect((function(){(0,y.trackThreadBrowserTab)()}),[]);return R("div",{className:(0,u.default)($,E.default.container)},void 0,R("div",{className:E.default.header},void 0,R(p.default,{className:E.default.threadIcon}),R(s.Heading,{variant:"heading-md/medium",className:E.default.title,level:3},void 0,M.default.Messages.THREAD_BROWSER_TITLE),V?a.createElement(a.Fragment,null,R("div",{className:E.default.divider}),a.createElement(I,q)):null,R("div",{className:E.default.spacer}),G?R(f.default,{size:f.default.Sizes.MIN,
className:E.default.createButton,onClick:function(){z();(0,b.openThreadSidebarForCreating)(L,void 0,"Thread Browser Toolbar")}},void 0,M.default.Messages.CREATE):null,R(d.default,{className:E.default.closeIcon,onClick:z,"aria-label":M.default.Messages.CLOSE},void 0,j)),q.hasResults?R(g.default,{channel:L,startThread:U,gotoThread:Y,threadIds:q.results}):R(S.default,{channel:L,startThread:U,gotoThread:Y}))}k.displayName="ThreadBrowser";function I(e){var t=e.query,r=e.setQuery,n=e.submit,a=e.isLoading;return R(c.default,{autoFocus:!0,className:E.default.searchBox,query:t,isLoading:a,onChange:function(e){return r(e)},onClear:function(){return r("")},onKeyDown:function(e){return"Enter"===e.key&&n()}})}I.displayName="SearchBox"},895377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=m;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e)
;var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n)}(r(667294));var n,a=c(r(956117)),u=r(772575),o=r(645758),l=c(r(571830)),i=c(r(830759)),f=r(819235),d=c(r(247001)),s=c(r(170471));function c(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function p(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var l=new Array(o),i=0;i<o;i++)l[i]=arguments[i+3];t.children=l}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,
_owner:null}}var h=p(i.default,{width:36,height:36});function m(e){var t=e.channel,r=e.header,n=e.startThread,i=(0,f.useCanStartPublicThread)(t),c=(0,f.useCanStartPrivateThread)(t);return p("div",{className:s.default.container},void 0,p("div",{className:s.default.iconContainer},void 0,p("div",{className:s.default.icon},void 0,h),p(l.default,{className:s.default.stars})),p(u.Heading,{className:s.default.header,variant:"heading-xl/medium",level:3},void 0,r),p(o.Text,{color:"header-secondary",variant:"text-md/normal"},void 0,d.default.Messages.THREAD_BROWSER_EMPTY_STATE_SUBTEXT),i||c?p(a.default,{className:s.default.cta,onClick:n},void 0,d.default.Messages.CREATE_THREAD):null)}m.displayName="ThreadBrowserEmptyState"},903086:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e)
;var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(536211),o=r(378158),l=y(r(644263)),i=y(r(737483)),f=y(r(728429)),d=y(r(16941)),s=r(772575),c=y(r(152731)),v=y(r(864061)),p=y(r(330042)),h=r(64072),m=y(r(259869));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function S(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var l=new Array(o),i=0;i<o;i++)l[i]=arguments[i+3];t.children=l}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{
$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function b(){b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return b.apply(this,arguments)}function T(e,t,r,n,a,u,o){try{var l=e[u](o),i=l.value}catch(e){r(e);return}l.done?t(i):Promise.resolve(i).then(n,a)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function o(e){T(u,n,a,o,l,"next",e)}function l(e){T(u,n,a,o,l,"throw",e)}o(void 0)}))}}var M=a.memo((function(e){var t=e.threadId,n=e.gotoThread,i=e.showChannelName,f=(0,u.useStateFromStores)([l.default],(function(){return l.default.getChannel(t)})),c=(0,u.useStateFromStores)([l.default],(function(){return l.default.getChannel(f.parent_id)}));return S(d.default,{className:m.default.container,onClick:function(e){return n(f,e.shiftKey)},onContextMenu:function(e){return(0,
o.openContextMenuLazy)(e,_(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([r.e(40532),r.e(83082),r.e(35315)]).then(r.bind(r,818228));case 2:t=e.sent;n=t.default;return e.abrupt("return",(function(e){return a.createElement(n,b({},e,{channel:f}))}));case 5:case"end":return e.stop()}}),e)}))))}},void 0,S("div",{className:m.default.left},void 0,S(s.Heading,{className:m.default.threadNameLine,variant:"heading-md/medium",level:3},void 0,S("span",{className:m.default.threadName},void 0,f.name),i&&null!=c?S("span",{className:m.default.parentName},void 0,"#"+c.name):null),(0,p.default)(f)),S(E,{channel:f}))}));t.default=M;function E(e){var t=e.channel,r=(0,u.useStateFromStores)([v.default],(function(){var e;return null!==(e=v.default.getMemberIdsPreview(t.id))&&void 0!==e?e:[]})),n=(0,u.useStateFromStores)([v.default],(function(){var e
;return null!==(e=v.default.getMemberCount(t.id))&&void 0!==e?e:0})),o=(0,u.useStateFromStoresArray)([f.default],(function(){return r.map((function(e){return f.default.getUser(e)}))}));a.useEffect((function(){r.filter((function(e,t){return null==o[t]})).forEach((function(e){i.default.requestMember(t.guild_id,e)}))}),[]);return 0===r.length?null:S(c.default,{className:m.default.facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:o,count:n,max:h.MAX_THREAD_MEMBERS_PREVIEW})}E.displayName="Facepile"},330042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.RecentMessageSubtext=R;t.default=function(e){return e.isActiveThread()?A(N,{channel:e}):A(j,{channel:e})};var n,a=O(r(667294)),u=r(536211),o=O(r(538930)),l=r(982437),i=E(r(786661)),f=E(r(116518)),d=E(r(907932)),s=E(r(876874)),c=E(r(191391)),v=E(r(290629)),p=E(r(728429)),h=r(645758),m=E(r(800533)),y=E(r(830759)),g=r(961365),S=E(r(71636)),b=E(r(979674)),T=r(566142),_=E(r(247001)),M=E(r(259869));function E(e){
return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}function A(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var l=new Array(o),i=0;i<o;i++)l[i]=arguments[i+3];t.children=l}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,
key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function N(e){var t=e.channel,r=(0,u.useStateFromStores)([b.default],(function(){return b.default.getMostRecentMessage(t.id)}));return null==r?A(P,{channel:t}):A(R,{channel:t,message:r})}function P(e){var t=e.channel,r=(0,u.useStateFromStores)([c.default],(function(){return c.default.lastMessageId(t.id)}));return A(h.Text,{className:M.default.subtext,variant:"text-sm/normal",color:"header-secondary"},void 0,_.default.Messages.THREAD_BROWSER_NO_RECENT_MESSAGES,"  •  ",(0,T.getTimestampString)(S.default.extractTimestamp(r)))}P.displayName="NoRecentMessageSubtext";function R(e){var t,r=e.channel,n=e.message;(0,l.useSubscribeGuildMembers)(((t={})[r.guild_id]=[n.author.id],t));var i=(0,u.useStateFromStores)([p.default],(function(){var e;return null!==(e=p.default.getUser(n.author.id))&&void 0!==e?e:n.author})),s=(0,d.default)(n),c=s.nick,m=s.colorString,y=(0,u.useStateFromStores)([v.default],(function(){
return v.default.isBlocked(n.author.id)})),b=a.useMemo((function(){var e=null!=n.content&&""!==n.content?(0,f.default)(n,{formatInline:!0}).content:null,t=(0,g.renderSingleLineMessage)(n,e,y,M.default.messageContent,M.default.messageContentIcon),r=t.contentPlaceholder,u=t.renderedContent,o=t.icon;return a.createElement(a.Fragment,null,null!=u?u:A("span",{},void 0,r),o)}),[n,y]);return A(h.Text,{className:M.default.subtext,variant:"text-sm/normal",color:"header-secondary"},void 0,A(o.default,{className:M.default.avatar,user:i,size:o.Sizes.SIZE_16}),A("span",{className:M.default.authorName,style:{color:m}},void 0,c,":")," ",b,"  •  ",(0,T.getTimestampString)(S.default.extractTimestamp(n.id)))}R.displayName="RecentMessageSubtext";function j(e){var t,r,n,f,d=e.channel,v=(0,u.useStateFromStores)([c.default],(function(){return c.default.lastMessageId(d.id)
})),g=null==v?new Date(null!==(t=null===(r=d.threadMetadata)||void 0===r?void 0:r.archiveTimestamp)&&void 0!==t?t:Date.now()).getTime():S.default.extractTimestamp(v);(0,l.useSubscribeGuildMembers)(((n={})[d.guild_id]=[d.ownerId],n));var b=(0,u.useStateFromStores)([p.default],(function(){return p.default.getUser(d.ownerId)})),E=(0,u.useStateFromStores)([s.default],(function(){return s.default.getMember(d.guild_id,d.ownerId)})),w=null!==(f=(0,i.default)(d))&&void 0!==f?f:y.default;return A(h.Text,{className:M.default.subtext,variant:"text-sm/normal",color:"header-secondary"},void 0,null==b?a.createElement(a.Fragment,null,A("div",{className:M.default.noAvatarIcon},void 0,A(w,{width:10,height:10})),_.default.Messages.THREAD_BROWSER_LAST_ACTIVE_TIME.format({time:(0,T.getTimestampString)(g)})):a.createElement(a.Fragment,null,A(o.default,{className:M.default.avatar,user:b,size:o.Sizes.SIZE_16}),_.default.Messages.THREAD_BROWSER_STARTED_BY.format({authorHook:function(e,t){var r,n
;return A(m.default,{className:M.default.startedByName,color:null!==(r=null==E?void 0:E.colorString)&&void 0!==r?r:void 0,name:null!==(n=null==E?void 0:E.nick)&&void 0!==n?n:b.username},t)}}),A("span",{className:M.default.bullet},void 0,"•"),_.default.Messages.THREAD_BROWSER_LAST_ACTIVE_TIME.format({time:(0,T.getTimestampString)(g)})))}j.displayName="ArchiveTimeSubtext"},911163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=g;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n
}(r(667294)),u=p(r(80828)),o=r(645758),l=p(r(521358)),i=r(651510),f=p(r(895377)),d=p(r(903086)),s=r(64072),c=p(r(247001)),v=p(r(610687));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function m(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var l=new Array(o),i=0;i<o;i++)l[i]=arguments[i+3];t.children=l}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var y=new Set;function g(e){var t=e.channel,r=e.startThread,n=e.gotoThread,o=(0,i.useActiveThreads)(t),p=o.joinedThreadIds,h=o.unjoinedThreadIds,g=(0,
i.useArchivedThreads)(t,s.SortOrder.LastMessage,y),b=g.threadIds,T=g.canLoadMore,_=g.loading,M=g.loadMore,E=a.useRef(null);(0,i.useTrackThreadBrowserTab)();var w=a.useCallback((function(e){var t=0===e.section?p:1===e.section?h:b;return m(d.default,{threadId:t[e.row],gotoThread:n},e.section+"-"+e.row)}),[b,p,h,n]),O=a.useCallback((function(e){return 0===e.section?m(S,{text:c.default.Messages.THREAD_BROWSER_JOINED_HEADER.format({count:p.length})},e.section):1===e.section?m(S,{text:c.default.Messages.THREAD_BROWSER_OTHER_HEADER.format({count:h.length})},e.section):m(S,{text:c.default.Messages.THREAD_BROWSER_ARCHIVED_HEADER},e.section)}),[p.length,h.length]),A=a.useCallback((function(e){return 1===e&&p.length>0||2===e&&(p.length>0||h.length>0)?64:32}),[p.length,h.length]),N=a.useCallback((function(){var e,t=null===(e=E.current)||void 0===e?void 0:e.getScrollerState();if(null!=t){var r=t.scrollTop+t.offsetHeight;t.scrollHeight-r<200&&M()}}),[M])
;return 0===p.length&&0===h.length&&0===b.length?m("div",{className:v.default.list},void 0,_?m(u.default,{className:v.default.spinner}):m(f.default,{channel:t,header:c.default.Messages.THREAD_BROWSER_EMPTY_STATE_HEADER,startThread:r})):a.createElement(l.default,{ref:E,className:v.default.list,fade:!0,sections:[p.length,h.length,b.length],sectionHeight:A,rowHeight:80,renderRow:w,renderSection:O,chunkSize:20,onScroll:T?N:void 0})}g.displayName="ThreadList";function S(e){var t=e.text;return m(o.Text,{color:"header-secondary",variant:"text-xs/normal",className:v.default.sectionHeader},void 0,t)}S.displayName="SectionHeader"}}]);
//# sourceMappingURL=c938ed04a26da9949440.js.map