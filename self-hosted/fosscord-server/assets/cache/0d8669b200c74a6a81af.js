"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[66845],{264720:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.popAllLayers=function(){o.default.dispatch({type:"LAYER_POP_ALL"})};t.popLayer=function(){o.default.dispatch({type:"LAYER_POP"})};t.pushLayer=function(e){o.default.dispatch({type:"LAYER_PUSH",component:e})};var r,o=(r=n(636602))&&r.__esModule?r:{default:r}},226800:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=S(n(118915)),o=S(n(972247)),i=S(n(636602)),a=S(n(516818)),u=S(n(308920)),l=n(692711),s=S(n(40856)),c=n(864489),d=n(264720),f=n(770348),p=S(n(247001));function S(e){return e&&e.__esModule?e:{default:e}}function _(){_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return _.apply(this,arguments)}var E={open:function(e,t,n){void 0===e&&(e=null);void 0===t&&(t=null)
;void 0===n&&(n={openWithoutBackstack:!1});i.default.dispatch(_({type:"USER_SETTINGS_MODAL_OPEN",section:e,subsection:t},n));(0,d.pushLayer)(f.Layers.USER_SETTINGS)},init:function(e,t,n){void 0===t&&(t=null);i.default.dispatch(_({type:"USER_SETTINGS_MODAL_INIT",section:e,subsection:t},n))},close:function(){var e=a.default.onClose;i.default.dispatch({type:"USER_SETTINGS_MODAL_CLOSE"});null!=e&&e()},setSection:function(e,t){void 0===t&&(t=null);i.default.dispatch({type:"USER_SETTINGS_MODAL_SET_SECTION",section:e,subsection:t})},clearSubsection:function(e){i.default.dispatch({type:"USER_SETTINGS_MODAL_CLEAR_SUBSECTION",forSection:e})},updateAccount:function(e){i.default.dispatch({type:"USER_SETTINGS_MODAL_UPDATE_ACCOUNT",settings:e})},submitComplete:function(){i.default.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT_COMPLETE"})},reset:function(){i.default.dispatch({type:"USER_SETTINGS_MODAL_RESET"})},saveAccountChanges:function(e,t){var n=this;i.default.dispatch({
type:"USER_SETTINGS_MODAL_SUBMIT"});var a=e.username,d=e.email,S=e.emailToken,E=e.password,T=e.avatar,O=e.newPassword,v=e.discriminator,h=t.close;return(0,s.default)((function(e){var t=_({username:a,email:d,email_token:S,password:E,avatar:T,new_password:O},e,{discriminator:null!=v&&""!==v?v:void 0}),n=o.default.get(f.DEVICE_TOKEN),i=(0,c.getDevicePushProvider)();if(null!=i&&null!=n){t.push_provider=i;t.push_token=n}var u=o.default.get(f.DEVICE_VOIP_TOKEN);if(null!=f.DEVICE_PUSH_VOIP_PROVIDER&&null!=u){t.push_voip_provider=f.DEVICE_PUSH_VOIP_PROVIDER;t.push_voip_token=u}return r.default.patch({url:f.Endpoints.ME,body:t,oldFormErrors:!0})}),{checkEnabled:!1,modalProps:{title:p.default.Messages.TWO_FA_CHANGE_ACCOUNT},hooks:{onEarlyClose:function(){return i.default.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT_FAILURE",errors:{}})}}}).then((function(e){var t=e.body,r=t.token;u.default.track(f.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,l.isAnimatedIconHash)(t.avatar)});delete t.token
;i.default.dispatch({type:"UPDATE_TOKEN",token:r,userId:t.id});i.default.dispatch({type:"CURRENT_USER_UPDATE",user:t});null!=O&&i.default.dispatch({type:"USER_PASSWORD_UPDATE",user:t,newPassword:O});null!=E&&null!=O&&i.default.dispatch({type:"PASSWORD_UPDATED",userId:t.id});h?n.close():n.submitComplete();return e}),(function(e){i.default.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT_FAILURE",errors:e.body});return e}))}};t.default=E},516818:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=l(n(496486)),o=l(n(536211)),i=l(n(636602)),a=l(n(728429)),u=n(770348);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}function d(){d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return d.apply(this,arguments)}var f=u.FormStates.CLOSED,p=null,S=null,_={},E={},T=null,O=null,v=!1,h=!1,y=null,U=null,I=null,C=[],A=null;function N(e){var t,n,r,o,i,l,s=a.default.getCurrentUser();if(null==s)return b();S=null!==(t=e.section)&&void 0!==t?t:S;A=null!==(n=e.section)&&void 0!==n?n:S;null!=e.subsection&&null!=S&&(_[S]=e.subsection);h=!!e.openWithoutBackstack;f=u.FormStates.OPEN;E={};T=((r={})[u.UserSettingsSections.ACCOUNT]={userId:s.id,username:s.username,discriminator:s.discriminator,email:s.email,avatar:s.avatar,password:"",newPassword:null,claimed:s.isClaimed()},r);O=d({},T);U=null!==(o=e.onClose)&&void 0!==o?o:null;I=null!==(i=e.analyticsLocation)&&void 0!==i?i:null;C=null!==(l=e.analyticsLocations)&&void 0!==l?l:[]}function b(){f=u.FormStates.CLOSED;v=!1;T=null;A=null;O=null;p=null;S=null;_={};U=null;I=null;C=[]}function m(){f=u.FormStates.OPEN;E={}}var P=function(e){!function(e,t){
e.prototype=Object.create(t.prototype);e.prototype.constructor=e;c(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(a.default)};n.hasChanges=function(){return null!=O&&null!=T&&(!(!this.isOpen()&&y!==u.DrawerTabTypes.USER_SETTINGS)&&!r.default.isEqual(O,T))};n.isOpen=function(){return v};n.getPreviousSection=function(){return p};n.getSection=function(){return S};n.getSubsection=function(){return null!=S?_[S]:null};n.shouldOpenWithoutBackstack=function(){return h};n.getProps=function(){return{submitting:f===u.FormStates.SUBMITTING,section:S,subsection:null!=_&&null!=S?_[S]:null,settings:O,errors:E,hasChanges:this.hasChanges(),openWithoutBackstack:h,analyticsLocation:I,analyticsLocations:C,initialSection:A}};n.__getLocalVars=function(){return{formState:f,previousSection:p,section:S,subsections:_,errors:E,originalSettings:T,settings:O,open:v,openWithoutBackstack:h,tab:y,onClose:U,analyticsLocation:I,analyticsLocations:C,
initialSection:A}};!function(e,t,n){t&&s(e.prototype,t);n&&s(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onClose",get:function(){return U}}]);return t}(o.default.Store);P.displayName="UserSettingsModalStore";var L=new P(i.default,{USER_SETTINGS_MODAL_OPEN:function(e){v=!0;N(e)},USER_SETTINGS_MODAL_INIT:N,USER_SETTINGS_MODAL_CLOSE:b,LOGOUT:b,USER_SETTINGS_MODAL_SUBMIT:function(){f=u.FormStates.SUBMITTING},USER_SETTINGS_MODAL_SUBMIT_FAILURE:function(e){var t;if(f!==u.FormStates.SUBMITTING)return!1;f=u.FormStates.OPEN;S=u.UserSettingsSections.ACCOUNT;E=null!==(t=e.errors)&&void 0!==t?t:{}},USER_SETTINGS_MODAL_SET_SECTION:function(e){p=S;S=e.section;null!=e.subsection&&(_[S]=e.subsection)},USER_SETTINGS_MODAL_CLEAR_SUBSECTION:function(e){var t=e.forSection;null!=t?delete _[t]:null!=S&&delete _[S]},USER_SETTINGS_MODAL_UPDATE_ACCOUNT:function(e){var t=e.settings;null==O&&(O={});var n=O[u.UserSettingsSections.ACCOUNT];O[u.UserSettingsSections.ACCOUNT]=d({},n,{},t)},
USER_SETTINGS_MODAL_SUBMIT_COMPLETE:m,USER_SETTINGS_MODAL_RESET:function(){var e=a.default.getCurrentUser();m();if(null!=e){var t;T=((t={})[u.UserSettingsSections.ACCOUNT]={userId:e.id,username:e.username,discriminator:e.discriminator,email:e.email,avatar:e.avatar,password:"",newPassword:null,claimed:e.isClaimed()},t);O=d({},T)}},DRAWER_SELECT_TAB:function(e){y=e.tab;return null==S&&y===u.DrawerTabTypes.USER_SETTINGS&&N({type:"USER_SETTINGS_MODAL_INIT",section:null,subsection:null,openWithoutBackstack:!1})}});t.default=L},417184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=d;var r,o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null
;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),a=(r=n(468205))&&r.__esModule?r:{default:r},u=["width","height","color","foreground"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return s.apply(this,arguments)}function c(e,t,n,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){
var t=e.width,n=void 0===t?20:t,r=e.height,o=void 0===r?20:r,l=e.color,d=void 0===l?"currentColor":l,f=e.foreground,p=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,u);return i.createElement("svg",s({},(0,a.default)(p),{width:n,height:o,viewBox:"0 0 20 20"}),c("path",{d:"M10 0C4.486 0 0 4.486 0 10C0 15.515 4.486 20 10 20C15.514 20 20 15.515 20 10C20 4.486 15.514 0 10 0ZM9 4H11V11H9V4ZM10 15.25C9.31 15.25 8.75 14.691 8.75 14C8.75 13.31 9.31 12.75 10 12.75C10.69 12.75 11.25 13.31 11.25 14C11.25 14.691 10.69 15.25 10 15.25Z",fillRule:"evenodd",clipRule:"evenodd",className:f,fill:d}))}d.displayName="WarningCircle"}}]);
//# sourceMappingURL=0d8669b200c74a6a81af.js.map