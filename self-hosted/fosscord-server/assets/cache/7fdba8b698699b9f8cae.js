(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[13643],{313643:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var l,i=j(a(667294)),n=k(a(294184)),s=k(a(267258)),o=a(536211),d=a(678928),u=k(a(964285)),r=a(799357),f=k(a(243336)),c=k(a(192631)),E=j(a(517286)),_=k(a(30098)),N=k(a(290629)),L=k(a(871778)),M=k(a(728429)),v=k(a(789446)),p=a(772575),T=k(a(160629)),I=a(645758),O=k(a(730977)),C=a(354479),m=j(a(37241)),A=k(a(662197)),S=k(a(700113)),g=k(a(614617)),y=k(a(308920)),h=k(a(550270)),b=k(a(656016)),D=a(402821),R=a(732978),U=a(770348),P=k(a(247001)),B=k(a(124715)),F=k(a(191696)),x=k(a(78205)),Y=k(a(901182)),G=k(a(277329)),H=k(a(99846)),w=k(a(277292)),V=k(a(864244));function k(e){return e&&e.__esModule?e:{default:e}}function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(W=function(e){return e?a:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=W(t);if(a&&a.has(e))return a.get(e);var l={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(l,n,s):l[n]=e[n]}l.default=e;a&&a.set(e,l);return l}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var l,i,n=[],s=!0,o=!1;try{for(a=a.call(e);!(s=(l=a.next()).done);s=!0){n.push(l.value);if(t&&n.length===t)break}}catch(e){o=!0;i=e}finally{try{s||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name)
;if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}function X(){X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e};return X.apply(this,arguments)}function $(e,t,a,i){l||(l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=i;else if(s>1){for(var o=new Array(s),d=0;d<s;d++)o[d]=arguments[d+3];t.children=o}if(t&&n)for(var u in n)void 0===t[u]&&(t[u]=n[u]);else t||(t=n||{});return{$$typeof:l,
type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}var q=function(e){var t=e.guild,a=e.onAcceptVerificationLevel,l=e.onAcceptContentFilter,i=e.disableContentFilter,n=e.disableVerificationLevel,s=e.headerId,d=e.theme,u=(0,o.useStateFromStores)([_.default],(function(){return _.default.getGuild(t.id)}),[t.id]),r=null!=u&&u.verificationLevel>U.VerificationLevels.NONE,f=(null==u?void 0:u.explicitContentFilter)===U.GuildExplicitContentFilterTypes.ALL_MEMBERS,c=d===U.ThemeTypes.DARK?H.default:w.default;return $("div",{className:B.default.container},void 0,$("div",{className:B.default.content},void 0,$("img",{alt:"",src:c,width:80}),$(p.Heading,{variant:"heading-xl/medium",className:B.default.header,id:s,level:3},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_1_HEADER),$(I.Text,{color:"none",variant:"text-md/normal",className:B.default.headerCaption},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_1_BODY)),$("div",{className:B.default.form
},void 0,$(A.default,{},void 0,P.default.Messages.FORM_LABEL_VERIFICATION_LEVEL),$(m.default,{type:m.Types.DESCRIPTION,className:B.default.description},void 0,r?P.default.Messages.ENABLE_COMMUNITY_MODAL_VERIFICATION_LEVEL_MET:P.default.Messages.ENABLE_COMMUNITY_MODAL_VERIFICATION_LEVEL_HELP),$(v.default,{type:v.default.Types.ROW,disabled:n,value:t.verificationLevel>U.VerificationLevels.NONE,onChange:a},void 0,$(I.Text,{variant:"text-sm/normal"},void 0,P.default.Messages.ENABLE_PUBLIC_MODAL_VERIFICATION_LEVEL_DESCRIPTION))),$("div",{className:B.default.form},void 0,$(A.default,{},void 0,P.default.Messages.FORM_LABEL_EXPLICIT_CONTENT_FILTER),$(m.default,{type:m.Types.DESCRIPTION,className:B.default.description},void 0,f?P.default.Messages.ENABLE_COMMUNITY_MODAL_CONTENT_FILTER_MET:P.default.Messages.ENABLE_PUBLIC_MODAL_CONTENT_FILTER_HELP),$(v.default,{type:v.default.Types.ROW,disabled:i,value:t.explicitContentFilter===U.GuildExplicitContentFilterTypes.ALL_MEMBERS,onChange:l
},void 0,$(I.Text,{variant:"text-sm/normal"},void 0,P.default.Messages.EXPLICIT_CONTENT_FILTER_HIGH))))};q.displayName="EnableCommunityModalFirstStep";var z=function(e){var t=e.selectableChannels,a=e.onRuleChannelChange,l=e.ruleChannel,n=e.onPublicUpdatesChannelChange,s=e.publicUpdatesChannel,o=e.headerId,d=e.theme,u=e.guildId;i.useEffect((function(){(0,D.trackEnableCommunityFlow)({fromStep:R.EnableCommunityModalSteps.SAFETY_CHECK,toStep:R.EnableCommunityModalSteps.BASICS,guildId:u})}),[u]);var r=d===U.ThemeTypes.DARK?F.default:x.default;return $("div",{className:B.default.container},void 0,$("div",{className:B.default.content},void 0,$("img",{alt:"",src:r,width:80}),$(p.Heading,{variant:"heading-xl/medium",className:B.default.header,id:o,level:3},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_2_HEADER),$(I.Text,{color:"none",variant:"text-md/normal",className:B.default.headerCaption},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_2_BODY)),$("div",{
className:B.default.form},void 0,$(A.default,{},void 0,P.default.Messages.ENABLE_PUBLIC_MODAL_RULES_CHANNEL_TITLE),$(m.default,{type:m.Types.DESCRIPTION,className:B.default.description},void 0,P.default.Messages.ENABLE_PUBLIC_MODAL_RULES_CHANNEL_HELP),$(g.default,{options:t,onChange:a,value:l,maxVisibleItems:4})),$("div",{className:B.default.form},void 0,$(A.default,{},void 0,P.default.Messages.GUILD_SETTINGS_COMMUNITY_MOD_CHANNEL_TITLE),$(m.default,{type:m.Types.DESCRIPTION,className:B.default.description},void 0,P.default.Messages.GUILD_SETTINGS_COMMUNITY_MOD_CHANNEL_HELP),$(g.default,{options:t,onChange:n,value:s,popoutPosition:T.default.Positions.TOP,maxVisibleItems:4})))};z.displayName="EnableCommunityModalSecondStep";var J=function(e){
var t=e.guild,a=e.policyAccepted,l=e.everyoneRolePermissionsAccepted,s=e.onAcceptPolicy,o=e.onAcceptDefaultNotifications,d=e.onAcceptEveryoneRolePermissions,u=e.disableDefaultNotifications,r=e.disableEveryoneRolePermissions,f=e.headerId,c=e.theme===U.ThemeTypes.DARK?Y.default:G.default;i.useEffect((function(){(0,D.trackEnableCommunityFlow)({fromStep:R.EnableCommunityModalSteps.BASICS,toStep:R.EnableCommunityModalSteps.FINISH,guildId:t.id})}),[t.id]);return $("div",{className:B.default.container},void 0,$("div",{className:B.default.content},void 0,$("img",{alt:"",src:c,width:80}),$(p.Heading,{variant:"heading-xl/medium",className:B.default.header,id:f,level:3},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_3_HEADER),$(I.Text,{color:"none",variant:"text-md/normal",className:B.default.headerCaption},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_3_BODY)),$("div",{className:B.default.form},void 0,$(O.default,{
text:u?P.default.Messages.ENABLE_COMMUNITY_MODAL_REQUIREMENT_SATISFIED_TOOLTIP:null,"aria-label":!!u&&P.default.Messages.ENABLE_COMMUNITY_MODAL_REQUIREMENT_SATISFIED_TOOLTIP},void 0,(function(e){var a;return i.createElement("div",e,$(v.default,{type:v.default.Types.ROW,disabled:u,value:t.defaultMessageNotifications===U.UserNotificationSettings.ONLY_MENTIONS,onChange:o,className:(0,n.default)((a={},a[B.default.disabled]=u,a))},void 0,$(I.Text,{variant:"text-sm/normal"},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_LABEL.format({infoHook:function(){return $(O.default,{text:P.default.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_TOOLTIP,"aria-label":P.default.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_TOOLTIP},void 0,(function(e){return i.createElement(S.default,X({className:B.default.icon},e))}))}}))))}))),$(O.default,{text:r?P.default.Messages.ENABLE_COMMUNITY_MODAL_REQUIREMENT_SATISFIED_TOOLTIP:null,
"aria-label":!!r&&P.default.Messages.ENABLE_COMMUNITY_MODAL_REQUIREMENT_SATISFIED_TOOLTIP},void 0,(function(e){var t;return i.createElement("div",X({},e,{className:B.default.checkboxOption}),$(v.default,{type:v.default.Types.ROW,disabled:r,value:l,onChange:d,className:(0,n.default)((t={},t[B.default.disabled]=r,t))},void 0,$(I.Text,{variant:"text-sm/normal"},void 0,P.default.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_LABEL.format({infoHook:function(){return $(O.default,{text:P.default.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_TOOLTIP,"aria-label":P.default.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_TOOLTIP},void 0,(function(e){return i.createElement(S.default,X({className:B.default.icon},e))}))}}))))})),$("div",{className:B.default.form},void 0,$(A.default,{},void 0,P.default.Messages.PUBLIC_GUILD_POLICY_TITLE),$(m.default,{type:m.Types.DESCRIPTION,className:B.default.description},void 0,P.default.Messages.COMMUNITY_POLICY_HELP.format({
helpdeskArticle:h.default.getArticleURL(U.HelpdeskArticles.PUBLIC_GUILD_GUILDLINES)})),$(v.default,{type:v.default.Types.ROW,value:a,onChange:s},void 0,$(I.Text,{variant:"text-sm/normal"},void 0,P.default.Messages.PUBLIC_GUILD_POLICY_ACCEPT))))};J.displayName="EnableCommunityModalFinalStep";var Z=function(e){var t=e.transitionState,a=e.onClose;i.useEffect((function(){y.default.track(U.AnalyticEvents.OPEN_MODAL,{type:R.ENABLE_COMMUNITY_FLOW_MODAL_KEY})}),[]);var l=(0,o.useStateFromStoresObject)([f.default],(function(){return f.default.getProps()})).guild,n=(0,o.useStateFromStores)([L.default],(function(){return L.default.theme})),_=K(i.useState(!1),2),v=_[0],p=_[1],T=K(i.useState(!R.MODERATOR_PERMISSIONS.some((function(e){return b.default.canEveryone(e,l)
}))),2),I=T[0],O=T[1],m=K(i.useState(R.CREATE_NEW_CHANNEL_VALUE),2),A=m[0],S=m[1],g=K(i.useState(R.CREATE_NEW_CHANNEL_VALUE),2),h=g[0],D=g[1],F=K(i.useState(null==l?void 0:l.defaultMessageNotifications),1)[0],x=K(i.useState(null==l?void 0:l.verificationLevel),1)[0],Y=K(i.useState(null==l?void 0:l.explicitContentFilter),1)[0],G=K(i.useState(I),1)[0],H=null==l?void 0:l.getRole(null==l?void 0:l.id),w=(0,o.useStateFromStores)([E.default],(function(){return null!=l?E.default.getChannels(l.id):null}),[l]),k=(0,C.useUID)();if(null==l)return null;var W=[{value:R.CREATE_NEW_CHANNEL_VALUE,label:P.default.Messages.ENABLE_PUBLIC_MODAL_CREATE_CHANNEL}];w[E.GUILD_SELECTABLE_CHANNELS_KEY].forEach((function(e){var t=e.channel;t.type===U.ChannelTypes.GUILD_TEXT&&W.push({value:t.id,label:(0,d.computeChannelName)(t,M.default,N.default,!0)})}));var j=x!==U.VerificationLevels.NONE,Q=Y===U.GuildExplicitContentFilterTypes.ALL_MEMBERS,Z=F===U.UserNotificationSettings.ONLY_MENTIONS,ee=G,te=$(q,{guild:l,
disableVerificationLevel:j,disableContentFilter:Q,onAcceptVerificationLevel:function(e,t){t?t&&u.default.updateGuild({verificationLevel:U.VerificationLevels.LOW}):u.default.updateGuild({verificationLevel:x})},onAcceptContentFilter:function(e,t){t?u.default.updateGuild({explicitContentFilter:U.GuildExplicitContentFilterTypes.ALL_MEMBERS}):u.default.updateGuild({explicitContentFilter:Y})},headerId:k,theme:n}),ae=$(z,{selectableChannels:W,onRuleChannelChange:function(e){S(e)},onPublicUpdatesChannelChange:function(e){D(e)},ruleChannel:A,publicUpdatesChannel:h,headerId:k,theme:n,guildId:l.id}),le=$(J,{guild:l,disableDefaultNotifications:Z,disableEveryoneRolePermissions:ee,policyAccepted:v,everyoneRolePermissionsAccepted:I,onAcceptPolicy:function(e,t){p(!!t)},onAcceptDefaultNotifications:function(e,t){t?u.default.updateGuild({defaultMessageNotifications:U.UserNotificationSettings.ONLY_MENTIONS}):u.default.updateGuild({defaultMessageNotifications:F})},
onAcceptEveryoneRolePermissions:function(e,t){null!=H&&O(!!t)},headerId:k,theme:n}),ie=$("img",{alt:"",src:V.default,className:B.default.footerImage,width:240}),ne=[{modalContent:te,disableNextStep:l.explicitContentFilter!==U.GuildExplicitContentFilterTypes.ALL_MEMBERS||l.verificationLevel===U.VerificationLevels.NONE,overviewTitle:P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_1_TITLE},{modalContent:ae,disableNextStep:null==A||null==h,overviewTitle:P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_2_TITLE},{modalContent:le,disableNextStep:!v,overviewTitle:P.default.Messages.ENABLE_COMMUNITY_MODAL_STEP_3_TITLE}];return $(c.default,{stepData:ne,title:P.default.Messages.ENABLE_COMMUNITY_MODAL_TITLE,transitionState:t,onClose:function(){a();y.default.track(U.AnalyticEvents.MODAL_DISMISSED,{type:R.ENABLE_COMMUNITY_FLOW_MODAL_KEY})},completeButtonText:P.default.Messages.ENABLE_COMMUNITY_BUTTON_TEXT,onComplete:function(){if(null!=H&&v){var e=new Set(l.features);e.add(U.GuildFeatures.COMMUNITY)
;var t=I?s.default.remove(H.permissions,R.MODERATOR_PERMISSIONS_FLAG):H.permissions,a=X({},H,{permissions:t});u.default.updateGuild({features:e,rulesChannelId:A,publicUpdatesChannelId:h});u.default.saveGuild(l.id,{features:e,rulesChannelId:A,verificationLevel:l.verificationLevel,explicitContentFilter:l.explicitContentFilter,publicUpdatesChannelId:h,defaultMessageNotifications:l.defaultMessageNotifications});t!==H.permissions&&(0,r.saveRoleSettings)(l.id,[a])}},overviewFooter:ie,sequencerClassName:B.default.container})};Z.displayName="EnableCommunityModal";var ee=Z;t.default=ee},191696:(e,t,a)=>{e.exports=a.p+"d8a03b9985d824edc78c6eb4785dc949.svg"},78205:(e,t,a)=>{e.exports=a.p+"7e09d40fdac796955aae9fbe0eaba1f9.svg"},901182:(e,t,a)=>{e.exports=a.p+"b6193b9564ca0ecbbd1ed6b80f47646d.svg"},277329:(e,t,a)=>{e.exports=a.p+"148f1855747994b4d58b685f8a36c591.svg"},99846:(e,t,a)=>{e.exports=a.p+"070f1b98adc8ce07c7823021133efed5.svg"},277292:(e,t,a)=>{
e.exports=a.p+"447512eae624cde892775ce45dfb53ab.svg"}}]);
//# sourceMappingURL=7fdba8b698699b9f8cae.js.map