(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[15865],{452668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadInviteSuggestions=function(e,t,n){return(0,r.fetchUserAffinities)().then((function(){l.default.dispatch({type:"LOAD_INVITE_SUGGESTIONS",omitUserIds:null!=e?e:new Set,guild:t,channel:n})}))};t.searchInviteSuggestions=function(e){l.default.dispatch({type:"INVITE_SUGGESTIONS_SEARCH",query:e})};var a,l=(a=n(636602))&&a.__esModule?a:{default:a},r=n(314022)},115865:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.InviteRow=t.InviteCopyInputConnected=void 0
;var a,l=Te(n(667294)),r=ye(n(294184)),o=ye(n(441143)),i=ye(n(496486)),s=n(47354),u=Te(n(536211)),d=n(91817),c=ye(n(23170)),f=n(452668),v=Te(n(327169)),p=ye(n(954140)),g=ye(n(37039)),h=n(460784),I=ye(n(250490)),m=n(678928),_=n(341186),E=n(10614),y=ye(n(860593)),S=ye(n(58941)),T=n(463893),N=ye(n(881563)),M=ye(n(750064)),C=ye(n(217964)),A=ye(n(607209)),O=Te(n(778548)),R=ye(n(644263)),L=ye(n(517286)),w=ye(n(729748)),b=ye(n(739417)),D=ye(n(689389)),x=ye(n(788739)),U=ye(n(290629)),F=ye(n(211136)),P=ye(n(790597)),V=ye(n(663303)),k=ye(n(871778)),G=ye(n(728429)),B=ye(n(487372)),H=ye(n(151097)),j=ye(n(956117)),K=ye(n(789446)),W=ye(n(16941)),Y=n(737705),z=ye(n(530250)),q=ye(n(665759)),Q=ye(n(567668)),$=n(645758),X=ye(n(279950)),J=ye(n(730977)),Z=n(688388),ee=ye(n(634230)),te=ye(n(782732)),ne=ye(n(417184)),ae=ye(n(114655)),le=n(3400),re=Te(n(628551)),oe=n(967965),ie=ye(n(308920)),se=n(856384),ue=Te(n(303763)),de=n(770348),ce=n(173652),fe=n(665984),ve=n(738681),pe=ye(n(247001)),ge=ye(n(12977)),he=ye(n(3066)),Ie=ye(n(380203)),me=ye(n(234532)),_e=ye(n(641501)),Ee=ye(n(457890))
;function ye(e){return e&&e.__esModule?e:{default:e}}function Se(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Se=function(e){return e?n:t})(e)}function Te(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Se(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e;n&&n.set(e,a);return a}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,l,r=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0){r.push(a.value);if(t&&r.length===t)break}}catch(e){i=!0;l=e}finally{try{o||null==n.return||n.return()}finally{
if(i)throw l}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ce(e,t,n,l){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=l;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&r)for(var u in r)void 0===t[u]&&(t[u]=r[u]);else t||(t=r||{});return{$$typeof:a,type:e,
key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ae(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;Oe(e,t)}function Oe(e,t){Oe=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Oe(e,t)}var Re=ue.default.getMaxAgeOptions,Le=ue.default.getMaxUsesOptions,we=ue.default.INVITE_OPTIONS_FOREVER,be=ue.default.INVITE_OPTIONS_7_DAYS,De=ue.default.INVITE_OPTIONS_UNLIMITED,xe=function(e){Ae(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];(t=e.call.apply(e,[this].concat(a))||this).state={sending:!1,invited:!1,hovered:!1};t.handleMouseEnter=function(){t.setState({hovered:!0})};t.handleMouseLeave=function(){t.setState({hovered:!1})};t.getSuggestedProps=function(){var e,n=t.props.row;return null!==(e=null!=n?b.default.getSelectedInviteMetadata(n):null)&&void 0!==e?e:null};t.handleClickInvite=function(){var e=t.props,n=e.user,a=e.channel,l=e.inviteKey,r=e.location;if(null!=l)if(null!=a){t.setState({
sending:!0});v.default.enqueue({type:v.InvitePropertiesType.GROUP_DM,channel:a,inviteKey:l,location:r,suggested:t.getSuggestedProps()},(function(e){t.setState({sending:!1,invited:e})}))}else if(null!=n){t.setState({sending:!0});v.default.enqueue({type:v.InvitePropertiesType.USER,user:n,inviteKey:l,location:r,suggested:t.getSuggestedProps()},(function(e){t.setState({sending:!1,invited:e})}))}};return t}var n=t.prototype;n.shouldComponentUpdate=function(e,t){return this.state.sending!==t.sending||this.state.invited!==t.invited||this.state.hovered!==t.hovered||this.props.user!==e.user||this.props.channel!==e.channel};n.renderUserOrChannel=function(){var e,t,n=this.props,a=n.user,l=n.channel;if(null!=a){e=a.getAvatarURL(null==l?void 0:l.guild_id,32);t=a.username}else if(null!=l){e=(0,h.getChannelIconURL)(l);t=(0,m.computeChannelName)(l,G.default,U.default)}return null==e||null==t?null:Ce(re.default,{src:e,"aria-label":t,size:re.Sizes.SIZE_32,className:ge.default.inviteRowAvatar})}
;n.render=function(){var e,t=this.props,n=t.user,a=t.channel,l=this.state,r=l.sending,o=l.invited,i=l.hovered;e=o?Ce(j.default,{look:j.default.Looks.LINK,size:j.default.Sizes.SMALL,disabled:!0,color:k.default.theme===de.ThemeTypes.DARK?j.default.Colors.WHITE:j.default.Colors.BLACK},void 0,pe.default.Messages.INVITE_FRIEND_MODAL_SENT):Ce(j.default,{color:j.default.Colors.GREEN,look:i?j.default.Looks.FILLED:j.default.Looks.OUTLINED,className:ge.default.inviteRowButton,size:j.default.Sizes.SMALL,submitting:r,onClick:this.handleClickInvite},void 0,pe.default.Messages.INVITE_FRIEND_MODAL_INVITE);return Ce("div",{className:ge.default.inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,Ce("div",{className:ge.default.inviteRowInfo},void 0,this.renderUserOrChannel(),Ce("div",{className:ge.default.inviteRowName},void 0,null!=n?n.toString():null,null!=a?(0,m.computeChannelName)(a,G.default,U.default):null)),e)};return t}(l.Component);t.InviteRow=xe
;xe.displayName="InviteRow";var Ue=function(e){Ae(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];(t=e.call.apply(e,[this].concat(a))||this).state={focused:!1,copied:!1};t._unsetCopiedState=new d.DelayedCall(1e3,(function(){return t.setState({copied:!1})}));t.handleCopy=function(){var e=t.props,n=e.value,a=e.onCopy;t.setState({copied:!0});t._unsetCopiedState.delay();a(n)};return t}var n=t.prototype;n.componentWillUnmount=function(){this._unsetCopiedState.cancel()};n.render=function(){var e,t=this,n=this.props,a=n.value,l=n.autoFocus,o=n.hideValue,i=this.state,s=i.focused,u=i.copied;return Ce("div",{className:(0,r.default)(_e.default.input,he.default.flexJustifyBetween,he.default.flexCenter,(e={},e[_e.default.success]=u,e[_e.default.focused]=s,e))},void 0,Ce(X.default,{className:ge.default.copyInput,name:"invite",value:o?pe.default.Messages.INSTANT_INVITE_HIDDEN:a,editable:!1,inputClassName:ge.default.noBorder,autoFocus:l,onFocus:function(){
return l?t.setState({focused:!0}):null},onBlur:function(){return l?t.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()},"aria-label":pe.default.Messages.FORM_LABEL_INVITE_LINK}),se.SUPPORTS_COPY?Ce(j.default,{size:j.default.Sizes.SMALL,color:u?j.default.Colors.GREEN:j.default.Colors.BRAND,className:ge.default.copyButton,onClick:this.handleCopy},void 0,u?pe.default.Messages.INVITE_COPIED:pe.default.Messages.COPY):null)};return t}(l.PureComponent);Ue.displayName="InviteCopyInput";function Fe(e){var t=e.error;return Ce($.Text,{className:ge.default.errorMessage,variant:"text-xs/normal",color:"text-danger"},void 0,t.getAnyErrorMessage())}Fe.displayName="InviteErrorMessage";var Pe=u.default.connectStores([V.default],(function(){return{hideValue:V.default.hideInstantInvites}}))(Ue);t.InviteCopyInputConnected=Pe;var Ve=Ce(y.default,{}),ke=function(e){Ae(t,e);function t(t){var n;(n=e.call(this,t)||this)._scroller=null
;n._headerId=i.default.uniqueId();n.handleGenerateNewLink=function(){var e=n.props,t=e.inviteChannel,a=e.source,l=null==t?void 0:t.id;if(null!=l){n.setState({networkError:void 0});c.default.createInvite(l,{max_age:n.state.maxAge,max_uses:n.state.maxUses,temporary:n.state.temporary},a).catch((function(e){return n.setState({networkError:e})}))}n.state.maxAge===we.value||n.state.savedMaxAge===we.value?n.setState({settingsOpen:!1}):n.setState({settingsOpen:!1,savedMaxAge:we.value})};n.handleCopy=function(e){var t=n.props,a=t.inviteChannel,l=t.source,r=t.code,o=t.guildScheduledEvent;(0,se.copy)(e);ie.default.track(de.AnalyticEvents.COPY_INSTANT_INVITE,{server:P.default.getGuildId(),channel:null==a?void 0:a.id,channel_type:null==a?void 0:a.type,location:l,code:r,guild_scheduled_event_id:null==o?void 0:o.id})};n.openSettings=function(){n.setState({settingsOpen:!0})};n.handleSelectMaxAge=function(e){n.setState({maxAge:e,savedMaxAge:n.state.maxAge})};n.handleSelectMaxUses=function(e){
n.setState({maxUses:e})};n.handleToggleTemporary=function(e){n.setState({temporary:e})};n.handleQueryChange=function(e){var t;null===(t=n._scroller)||void 0===t||t.scrollTo({to:0});(0,f.searchInviteSuggestions)(e);n.setState({query:e})};n.handleClearSearch=function(){n.handleQueryChange("")};n.handleToggleMaxAge=function(){n.setState({maxAge:n.state.savedMaxAge,savedMaxAge:n.state.maxAge},n.handleGenerateNewLink)};n.handleDone=function(){var e=n.props,t=e.onDone,a=e.onClose;n.state.settingsOpen?n.setState({settingsOpen:!1}):a();null==t||t()};n.getRowHeight=function(e,t){if(e>0)return 0;switch(n.props.rows[t].type){case ue.RowTypes.GROUP_DM:case ue.RowTypes.DM:case ue.RowTypes.FRIEND:return 44;default:return 0}};n.renderRow=function(e){var t=e.section,a=e.row;if(t>0)return null;var l=n.props.analyticsLocation,r=n.getInviteKey(),o=n.props.rows[a],i=o.type+"-"+o.item.id;switch(o.type){case ue.RowTypes.GROUP_DM:return Ce(xe,{row:o,channel:o.item,inviteKey:r,location:l},i)
;case ue.RowTypes.DM:case ue.RowTypes.FRIEND:return Ce(xe,{row:o,user:o.item,inviteKey:r,location:l},i);default:return null}};var a=t.maxAge,l=t.maxUses,r=t.temporary,o=t.forceSettings,s=t.guild.hasFeature(de.GuildFeatures.HUB)?we:be;n.state={query:"",settingsOpen:!0===o,maxAge:null!=a?a:s.value,savedMaxAge:a===we.value?s.value:we.value,maxUses:null!=l&&0!==l?l:De.value,temporary:null!=r&&r,networkError:void 0};return n}var n=t.prototype;n.componentDidMount=function(){var e=this,t=this.props,n=t.inviteChannel,a=t.code,l=t.guild,r=t.source,o=t.canCreateInvites,i=t.analyticsLocation,s=t.streamUserId,u=t.targetType,d=t.targetUserId,f=t.applicationId,v=t.initialCounts,p=t.rows,g=t.showFriends,h=this.state,I=h.maxAge,m=h.maxUses,_=h.temporary;if(o){var y=null==n?void 0:n.id;if(null==y)return;this.setState({networkError:void 0});c.default.createInvite(y,{validate:null!=a?a:null,max_age:I,max_uses:m,target_user_id:d,target_type:u,target_application_id:f,temporary:_},r).catch((function(t){
return e.setState({networkError:t})}))}g&&ie.default.track(de.AnalyticEvents.INVITE_SUGGESTION_OPENED,{location:r,num_suggestions:p.length,num_friends:v.numFriends,num_dms:v.numDms,num_group_dms:v.numGroupDms,guild_id:l.id});N.default.trackExposure({guildId:null==l?void 0:l.id});if(null!=s){var S=A.default.getStreamForUser(s),T=(0,E.getStreamerApplication)(S,x.default);ie.default.track(de.AnalyticEvents.OPEN_MODAL,{type:"Send Stream Invite",source:r,location:i,other_user_id:s,application_id:null!=T?T.id:null,application_name:null!=T?T.name:null,game_id:null!=T?T.id:null})}else null!=f||ie.default.track(de.AnalyticEvents.OPEN_MODAL,{type:"Instant Invite Modal",source:r,location:i})};n.getInviteKey=function(){var e=this.props,t=e.code,n=e.vanityURLCode,a=e.guildScheduledEvent,l=null!=t?t:n;return null==l?l:(0,T.generateInviteKeyFromExtraData)({baseCode:l,guildScheduledEventId:null==a?void 0:a.id})};n.renderChannelWarning=function(){var e=this.props.inviteChannel;return(0,
I.default)(e)?Ce("div",{className:ge.default.warningContainer},void 0,Ce(ne.default,{className:ge.default.warningIcon,color:de.Colors.STATUS_YELLOW,width:12}),Ce($.Text,{variant:"text-xs/normal",color:"header-secondary"},void 0,pe.default.Messages.INVITE_PRIVATE_CHANNEL_WARNING)):null};n.renderCopyInput=function(){var e,t=this.props,n=t.noInvitesAvailable,a=t.showFriends,o=this.state,i=o.maxAge,s=o.maxUses,u=o.networkError,d=(0,M.default)(null!==(e=this.getInviteKey())&&void 0!==e?e:"");return Ce(l.Fragment,{},void 0,Ce(Pe,{value:d,autoFocus:a,onCopy:this.handleCopy}),n?null:Ce($.Text,{variant:"text-xs/normal",className:(0,r.default)(Ie.default.marginTop8,ge.default.footerText)},void 0,(0,ue.maxAgeString)(i,s)," ",a?Ce(H.default,{onClick:this.openSettings},void 0,pe.default.Messages.INVITE_EDIT_LINK):null),null!=u?Ce(Fe,{error:u}):null)};n.renderHeader=function(){
var e,t=this.props,n=t.guild,a=t.showFriends,o=t.guildScheduledEvent,i=t.streamUserId,s=t.applicationId,u=t.welcomeToServer,d=t.inviteChannel,c=this.state,f=c.query,v=c.settingsOpen,p=null,g=null;e=u?null:null!=i?pe.default.Messages.INVITE_STREAM_HEADER:null!=s?pe.default.Messages.EMBEDDED_ACTIVITIES_INVITE_TO_ACTIVITY:null!=o?pe.default.Messages.GUILD_EVENT_INVITE_MODAL_TITLE:(null==d?void 0:d.isGuildStageVoice())?pe.default.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_HEADER:pe.default.Messages.INVITE_TO_SERVER_NAME.format({name:n.toString()});if(null!=d){var h=(0,_.getChannelIconComponent)(d,n);null!=h&&(g=Ce("div",{className:ge.default.headerChannelContainer},void 0,Ce(h,{className:ge.default.channelIcon}),Ce($.Text,{color:"interactive-normal",variant:"text-md/normal"},void 0,d.name)))}p=v?Ce(Z.FormTitle,{id:this._headerId,tag:Z.FormTitle.Tags.H2,className:(0,r.default)(Ie.default.marginReset,ge.default.headerCloseButtonSpacing,ge.default.headerText)
},void 0,pe.default.Messages.INVITE_SETTINGS_TITLE):n.hasFeature(de.GuildFeatures.HUB)?Ce("div",{className:ge.default.hubHeader},void 0,Ce(ae.default,{className:(0,r.default)(ge.default.hubInviteTitle,ge.default.headerCloseButtonSpacing),id:this._headerId,color:ae.default.Colors.HEADER_PRIMARY,size:ae.default.Sizes.SIZE_24},void 0,pe.default.Messages.HUB_INVITE_HEADER),Ce($.Text,{color:"header-secondary",variant:"text-md/normal"},void 0,pe.default.Messages.HUB_INVITE_SUBHEADER),a&&Ce(q.default,{query:f,className:ge.default.hubFriendSearch,onChange:this.handleQueryChange,placeholder:pe.default.Messages.INVITE_SEARCH_FOR_FRIENDS,"aria-label":pe.default.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})):a?Ce("div",{className:ge.default.header},void 0,Ce(Z.FormTitle,{id:this._headerId,tag:Z.FormTitle.Tags.H2,className:(0,r.default)(Ie.default.marginBottom4,ge.default.headerCloseButtonSpacing,ge.default.headerText)},void 0,e),g,Ce(q.default,{query:f,
className:ge.default.searchBar,onChange:this.handleQueryChange,placeholder:pe.default.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch}),Ce("div",{className:Ie.default.marginTop8},void 0,this.renderChannelWarning())):l.createElement(l.Fragment,null,Ce(Z.FormTitle,{id:this._headerId,tag:Z.FormTitle.Tags.H2,className:(0,r.default)(Ie.default.marginReset,ge.default.headerCloseButtonSpacing,ge.default.headerText)},void 0,e),g,this.renderChannelWarning());return Ce(le.ModalHeader,{separator:a&&!v},void 0,Ce(le.ModalCloseButton,{className:ge.default.closeButton,onClick:this.handleDone}),Ce("div",{className:ge.default.headerContainer},void 0,u&&!v&&l.createElement(l.Fragment,null,Ce("img",{className:ge.default.welcomeImage,src:Ee.default,alt:""}),Ce("h1",{className:ge.default.welcomeHeading},void 0,pe.default.Messages.INVITE_WELCOME_HEADING),Ce("p",{className:ge.default.welcomeSubheading},void 0,pe.default.Messages.INVITE_WELCOME_SUBHEADING)),null!=i?Ve:null,p))}
;n.renderSettingsBody=function(){var e=this.state,t=e.maxAge,n=e.maxUses,a=e.temporary,l=Re.find((function(e){return e.value===t})),o=Le.find((function(e){return e.value===n}));return Ce(le.ModalContent,{className:ge.default.settingsContent},void 0,Ce("form",{onSubmit:this.handleGenerateNewLink},void 0,Ce(Z.FormItem,{title:pe.default.Messages.EXPIRE_AFTER,className:Ie.default.marginTop20},void 0,Ce(oe.SingleSelect,{value:null==l?void 0:l.value,options:Re,onChange:this.handleSelectMaxAge})),Ce(Z.FormItem,{title:pe.default.Messages.MAX_NUMBER_OF_USES,className:(0,r.default)(Ie.default.marginTop20,Ie.default.marginBottom4)},void 0,Ce(oe.SingleSelect,{value:null==o?void 0:o.value,options:Le,onChange:this.handleSelectMaxUses})),Ce(Z.FormItem,{className:(0,r.default)(Ie.default.marginTop20,ge.default.switch)},void 0,Ce(Q.default,{value:a,onChange:this.handleToggleTemporary,note:pe.default.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0},void 0,Ce($.Text,{variant:"text-sm/normal"
},void 0,pe.default.Messages.GRANT_TEMPORARY_MEMBERSHIP)))))};n.renderFriendsBody=function(){var e=this.props.rows,t=this.getInviteKey();return 0===e.length?Ce(le.ModalContent,{className:(0,r.default)(Ie.default.marginBottom20,Ie.default.marginTop20)},void 0,Ce(Y.EmptyStateText,{},void 0,pe.default.Messages.INVITE_FRIEND_MODAL_NO_RESULTS)):null==t?Ce(le.ModalContent,{className:(0,r.default)(Ie.default.marginBottom20,Ie.default.marginTop20)},void 0,Ce(Y.EmptyStateText,{},void 0,pe.default.Messages.INVITE_FRIEND_MODAL_LOADING)):Ce(le.ModalListContent,{className:ge.default.scroller,sections:[e.length],renderSection:this.renderSection,sectionHeight:0,renderRow:this.renderRow,rowHeight:this.getRowHeight,paddingBottom:16})};n.renderSection=function(){return null};n.renderBody=function(){var e=this.props,t=e.guild,n=e.showFriends,a=e.streamUserId,l=e.applicationId;if(this.state.settingsOpen)return this.renderSettingsBody();if(n)return this.renderFriendsBody();var r=G.default.getCurrentUser()
;(0,o.default)(null!=r,"InstantInviteModal: user cannot be undefined");var i=t.isOwner(r)?pe.default.Messages.INVITE_SHARE_LINK_OWN_SERVER:pe.default.Messages.SHARE_INVITE_LINK_FOR_ACCESS;null!=a?i=pe.default.Messages.INVITE_SHARE_LINK_TO_STREAM:null!=l&&(i=pe.default.Messages.EMBEDDED_ACTIVITIES_SHARE_LINK_TO_ACTIVITY);return Ce(le.ModalContent,{className:ge.default.noScroll},void 0,Ce(z.default,{direction:z.default.Direction.VERTICAL,className:Ie.default.marginBottom20},void 0,Ce($.Text,{className:ge.default.subText,variant:"text-sm/normal"},void 0,i),this.renderCopyInput()))};n.renderFooter=function(){var e,t=this,n=this.props,a=n.noInvitesAvailable,o=n.showFriends,i=n.guildScheduledEvent,s=n.streamUserId,u=n.applicationId,d=n.inviteChannel,c=this.state,f=c.settingsOpen,v=c.maxAge,p=k.default.theme,g=null,h=this.renderBannerUpsell();if(f)g=Ce(l.Fragment,{},void 0,Ce(j.default,{onClick:this.handleGenerateNewLink},void 0,pe.default.Messages.GENERATE_A_NEW_LINK),Ce(j.default,{
look:j.default.Looks.LINK,color:p===de.ThemeTypes.LIGHT?j.default.Colors.PRIMARY:j.default.Colors.WHITE,onClick:this.handleDone},void 0,pe.default.Messages.CANCEL));else if(o){var I=pe.default.Messages.INVITE_FOOTER_LINK_HEADER;null!=s?I=pe.default.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:null!=u?I=pe.default.Messages.EMBEDDED_ACTIVITIES_INVITE_ACTIVITY_FOOTER_LINK_HEADER:null!=i?I=pe.default.Messages.GUILD_EVENT_INVITE_MODAL_FOOTER:(null==d?void 0:d.isGuildStageVoice())&&(I=pe.default.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_FOOTER);g=Ce(z.default,{direction:z.default.Direction.VERTICAL,className:ge.default.content},void 0,Ce(Z.FormTitle,{tag:Z.FormTitle.Tags.H5,className:Ie.default.marginBottom8},void 0,I),this.renderCopyInput(),h)}else a||(g=Ce(z.default,{justify:z.default.Justify.BETWEEN,className:Ie.default.marginTop20},void 0,Ce(K.default,{size:18,type:K.default.Types.INVERTED,value:v===we.value,onChange:this.handleToggleMaxAge},void 0,Ce($.Text,{
className:ge.default.checkBoxLabel,variant:"text-sm/normal"},void 0,pe.default.Messages.SET_INVITE_LINK_NEVER_EXPIRE)),Ce(J.default,{text:pe.default.Messages.LINK_SETTINGS},void 0,(function(e){var n=e.onMouseEnter,a=e.onMouseLeave;return Ce(W.default,{onClick:t.openSettings,onMouseEnter:n,onMouseLeave:a,className:me.default.cursorPointer},void 0,Ce(ee.default,{width:18,height:18,color:de.Colors.PRIMARY_DARK_400}))}))));return null!=g?Ce(le.ModalFooter,{className:f?ge.default.settingsFooter:(0,r.default)((e={},e[ge.default.noPadding]=!o,e[ge.default.footer]=o,e))},void 0,g):null};n.renderBannerUpsell=function(){var e=this.props,t=e.guild,n=e.analyticsLocations;return(null==t?void 0:t.hasFeature(de.GuildFeatures.INVITE_SPLASH))?null:Ce(z.default,{align:z.default.Align.CENTER,className:ge.default.inviteBannerUpsell},void 0,Ce(te.default,{className:ge.default.premiumIcon}),Ce($.Text,{variant:"text-sm/normal"},void 0,pe.default.Messages.INVITE_FRIEND_MODAL_BOOSTING_UPSELL),Ce(H.default,{
className:ge.default.inviteLink,onClick:function(){return(0,S.default)({analyticsLocations:n,analyticsSourceLocation:{section:de.AnalyticsSections.INVITE_LINK,object:de.AnalyticsObjects.LEARN_MORE},guild:t,perks:(0,fe.guildBannerInviteUpsellPerks)(),upsellType:fe.BoostingUpsellModalType.GUILD_BANNER_INVITE})}},void 0,pe.default.Messages.LEARN_MORE))};n.render=function(){var e=this.props,t=e.transitionState,n=e.inviteChannel,a=e.guild;return Ce("div",{className:this.props.showFriends?ge.default.wrapper:void 0},void 0,Ce(le.ModalRoot,{impressionName:s.ImpressionNames.GUILD_INVITE,impressionProperties:{invite_channel_id:null==n?void 0:n.id,invite_guild_id:a.id},"aria-labelledby":this._headerId,transitionState:t,className:ge.default.modal},void 0,this.renderHeader(),this.renderBody(),this.renderFooter()))};return t}(l.PureComponent);ke.displayName="InstantInviteModal";ke.defaultProps={analyticsLocation:de.AnalyticsLocations.GUILD_CREATE_INVITE_SUGGESTION}
;var Ge=l.forwardRef((function(e,t){var n=e.channel,a=e.guild,r=e.source,o=e.guildScheduledEvent,i=e.streamUserId,s=e.applicationId,d=e.transitionState,c=e.onClose,v=e.welcomeToServer,h=e.forceSettings,I=e.analyticsLocation,m=(0,g.default)(p.default.INSTANT_INVITE_MODAL),_=m.AnalyticsLocationProvider,E=m.analyticsLocations,y=(0,u.useStateFromStores)([F.default,R.default,L.default],(function(){var e,t;if(null!=n)return n;var l=F.default.getChannelId(),r=null==l||(0,ce.isStaticChannelRoute)(l)?void 0:R.default.getChannel(l);(null===(e=r)||void 0===e?void 0:e.isThread())&&(r=R.default.getChannel(r.parent_id));return null!==(t=r)&&void 0!==t?t:L.default.getDefaultChannel(a.id)}),[n,a.id]),S=null;null!=i?S=ve.InviteTargetTypes.STREAM:null!=s&&(S=ve.InviteTargetTypes.EMBEDDED_APPLICATION);var T=i,N=s,M=null!=n?n.getGuildId():null!=a?a.id:null,A=Ne((0,u.useStateFromStoresArray)([b.default,w.default,B.default,O.default],(function(){var e=null!=y?y.id:null
;return[b.default.getInviteSuggestionRows(),b.default.getTotalSuggestionsCount()>=1,b.default.getInitialCounts(),null!=e?w.default.getInvite(e,{targetType:S,targetUserId:T,targetApplicationId:N}):null,null!=n&&null!=y?B.default.getVoiceStatesForChannel(y):null,null!=M?O.default.getProps(M,e):null]}),[y,S,T,M]),6),x=A[0],U=A[1],P=A[2],V=A[3],k=A[4],G=A[5],H=(0,u.useStateFromStores)([D.default],(function(){return null!=y&&D.default.can(de.Permissions.CREATE_INSTANT_INVITE,y)}),[y]),j=null===V||!H,K=Ne(l.useState((function(){var e=new Set;null!=i&&null!=k?k.forEach((function(t){var n=t.user;e.add(n.id)})):null!=M&&null!=G&&G.rows.forEach((function(t){t.type===O.MemberListRowTypes.MEMBER&&e.add(t.userId)}));return e})),1)[0],W=null==n?void 0:n.id,Y=(0,u.useStateFromStores)([C.default],(function(){return C.default.getStageInstanceByChannel(W)}),[W]);l.useEffect((function(){(0,f.loadInviteSuggestions)(K,a,n).catch(de.NOOP_NULL)}),[K,n,a])
;var z=null!=V?V.code:void 0,q=null!=V?V.maxAge:void 0,Q=null!=V?V.maxUses:void 0,$=null!=V?V.temporary:void 0,X=j?a.vanityURLCode:void 0;H||null==(null==Y?void 0:Y.invite_code)||(z=Y.invite_code);return Ce(_,{},void 0,l.createElement(ke,{ref:t,canCreateInvites:H,noInvitesAvailable:j,inviteChannel:y,guild:a,guildScheduledEvent:o,streamUserId:i,vanityURLCode:X,targetType:S,targetUserId:T,applicationId:s,rows:x,showFriends:U,initialCounts:P,code:z,maxAge:q,maxUses:Q,temporary:$,source:r,welcomeToServer:v,forceSettings:h,analyticsLocations:E,analyticsLocation:I,transitionState:d,onClose:c}))}));t.default=Ge},327169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.InvitePropertiesType=void 0;var a=s(n(709403)),l=s(n(786345)),r=s(n(791548)),o=s(n(644263)),i=s(n(805780));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var d;t.InvitePropertiesType=d;!function(e){
e[e.GROUP_DM=0]="GROUP_DM";e[e.USER=1]="USER"}(d||(t.InvitePropertiesType=d={}));var c=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);function t(){return e.call(this,new r.default("InviteQueue"),1010)||this}var n=t.prototype;n._sendInvite=function(e,t,n,a,r){l.default.sendInvite(e.id,t,n,a).then((function(){return r(null,!0)}),(function(){return r(null,!1)}))};n.drain=function(e,t){var n=this,l=e.location,r=e.suggested;switch(e.type){case d.GROUP_DM:this._sendInvite(e.channel,e.inviteKey,l,r,t);break;case d.USER:a.default.ensurePrivateChannel(e.user.id).then((function(a){var i=o.default.getChannel(a);null!=i&&n._sendInvite(i,e.inviteKey,l,r,t)}),(function(){return t(null,!1)}))}};return t}(i.default));t.default=c},860593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,l,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{
default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e;n&&n.set(e,a);return a}(n(667294)),o=n(370405),i=n(91817),s=n(864489),u=(a=n(247001))&&a.__esModule?a:{default:a};function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function c(e,t,n,a){l||(l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&r)for(var u in r)void 0===t[u]&&(t[u]=r[u]);else t||(t=r||{});return{$$typeof:l,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e,t){
for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(e,a.key,a)}}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}var p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;v(e,t)}(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];(t=e.call.apply(e,[this].concat(a))||this)._flashTitleInterval=new i.Interval;t.state={titleIndex:null};t.handleFocus=function(){t._flashTitleInterval.stop();t.setState({titleIndex:null});document.removeEventListener("focusin",t.handleFocus)};t.rotateTitle=function(){var e=t.state.titleIndex;if(document.hasFocus()){t._flashTitleInterval.stop();t.setState({titleIndex:null})}else t.setState({titleIndex:(e+1)%t.titles.length})};return t}var n=t.prototype;n.componentDidMount=function(){if(!s.isPlatformEmbedded&&!document.hasFocus()){this.setState({
titleIndex:0});this._flashTitleInterval.start(1e3,this.rotateTitle);document.addEventListener("focusin",this.handleFocus)}};n.componentWillUnmount=function(){this._flashTitleInterval.stop();document.removeEventListener("focusin",this.handleFocus)};n.render=function(){return null!=this.title?c(o.Helmet,{},void 0,c("title",{},void 0,this.title)):null};!function(e,t,n){t&&f(e.prototype,t);n&&f(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"titles",get:function(){return[u.default.Messages.GO_LIVE_HEY,u.default.Messages.GO_LIVE_LOOK,u.default.Messages.GO_LIVE_LISTEN]}},{key:"title",get:function(){var e=this.state.titleIndex;return null!=e?this.titles[e]:null}}]);return t}(r.PureComponent);t.default=p;p.displayName="TitleFocusFlasher"},881563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a=(0,n(373505).createExperiment)({kind:"guild",id:"2022-05_vanity_url_target",label:"Vanity URL Targeting",defaultConfig:{enabled:!1},
treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});t.default=a},739417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a=s(n(536211)),l=s(n(636602)),r=n(303763),o=s(n(290629)),i=s(n(538983));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f,v,p,g,h=new Set,I=[],m=new Map;function _(e){var t=new Set,n=null==g?void 0:g.id,a=(0,r.getMostRecentDMedUser)(h,n);null==a||o.default.isBlocked(a.id)||t.add(a.id);for(var l,s=d(i.default.getUserAffinities());!(l=s()).done;){var u=l.value.user_id;o.default.isBlocked(u)||t.add(u)}return(0,r.generateRowsForQuery)(e,h,t,100,n)}function E(e){I=e;m=new Map;e.forEach((function(e,t){m.set(e,{index:t})}))}var y=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getInviteSuggestionRows=function(){return I};n.getTotalSuggestionsCount=function(){return v};n.getInitialCounts=function(){return f}
;n.getSelectedInviteMetadata=function(e){var t=m.get(e),n=i.default.getUserAffinitiesUserIds();return null!=t?{rowNum:t.index,isAffinitySuggestion:e.isSuggested,numTotal:I.length,numAffinityConnections:n.size,isFiltered:p}:null};n.__getLocalVars=function(){return{MAX_INVITE_SUGGESTION_COUNT:100,userIdsToOmit:h,inviteSuggestions:I,inviteSuggestionsMap:m,initialCounts:f,totalCount:v,isFiltered:p,currentGuild:g}};return t}(a.default.Store);y.displayName="InviteSuggestionsStore";var S=new y(l.default,{LOAD_INVITE_SUGGESTIONS:function(e){var t=e.omitUserIds,n=e.guild,a=e.channel;g=null!=a?n:null;h=t;p=!1;var l=_(""),r=l.rows,o=l.counts;E(r);f=o;v=I.length},INVITE_SUGGESTIONS_SEARCH:function(e){var t=e.query;p=""!==t;E(_(t).rows)}});t.default=S},457890:(e,t,n)=>{e.exports=n.p+"cf3e2e7f108d20c8d804a13c9067f5a6.svg"}}]);
//# sourceMappingURL=47421b40cdb9716b3cf9.js.map