"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[81823],{274858:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return function(n){return l(o.default,{page:t.page,section:t.section,object:t.object,objectType:t.objectType},void 0,a.createElement(e,n))}};var i,r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}i.default=e;n&&n.set(e,i);return i}(n(667294)),o=(i=n(284382))&&i.__esModule?i:{default:i};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t,n,i){
r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}},884427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return function(n){return l((0,o.default)(t).AnalyticsLocationProvider,{},void 0,a.createElement(e,n))}};var i,r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null
;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}i.default=e;n&&n.set(e,i);return i}(n(667294)),o=(i=n(37039))&&i.__esModule?i:{default:i};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}},540593:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var i=(0,d.default)().analyticsLocations,$=(0,a.useStateFromStores)([E.default],(function(){return E.default.getCurrentUser()})),X=(0,a.useStateFromStores)([w.default],(function(){
return w.default.getSelfEmbeddedActivities()})),B=(0,a.useStateFromStoresArray)([O.default],(function(){return O.default.getActivities().filter((function(e){return null!=e.application_id&&!(null==X?void 0:X.has(e.application_id))}))})),z=(0,a.useStateFromStoresArray)([T.default],(function(){return null!=t?T.default.getActivities(t.id,null==e?void 0:e.getGuildId()):[]}),[t,e]),Z=(0,a.useStateFromStoresArray)([w.default],(function(){var n=null!=(null==e?void 0:e.id)?w.default.getEmbeddedActivitiesForChannel(e.id):w.NO_ACTIVITIES;return null!=t?n.filter((function(e){return e.connections.has(t.id)})):n}),[t,e]),te=(0,R.default)(),ne=(0,a.useStateFromStores)([b.default],(function(){return null==e||e.isPrivate()||b.default.can(F.Permissions.SEND_MESSAGES,e)}),[e]),ie=(0,a.useStateFromStoresArray)([C.default],(function(){return[].concat(q(z.map((function(e){return null!=e.application_id&&C.default.getState(e.application_id,F.ActivityActionTypes.JOIN)===F.ActivityActionStates.LOADING
}))),q(Z.map((function(e){return C.default.getState(e.application_id,F.ActivityActionTypes.JOIN)===F.ActivityActionStates.LOADING}))))}),[z,Z]),re=(0,a.useStateFromStoresArray)([S.default,m.default,A.default,h.default,g.default,N.default,b.default],(function(){return[].concat(q(z.map((function(n){return(0,V.default)({user:t,activity:n,channelId:null==e?void 0:e.id,isEmbedded:(0,G.default)(n),ChannelStore:S.default,GuildStore:m.default,GuildMemberCountStore:A.default,RelationshipStore:h.default,SelectedChannelStore:g.default,VoiceStateStore:N.default,PermissionStore:b.default})}))),q(Z.map((function(n){return(0,V.default)({user:t,activity:n,channelId:null==e?void 0:e.id,isEmbedded:!0,ChannelStore:S.default,GuildStore:m.default,GuildMemberCountStore:A.default,RelationshipStore:h.default,SelectedChannelStore:g.default,VoiceStateStore:N.default,PermissionStore:b.default})}))))}),[t,z,Z]),ae=(0,a.useStateFromStoresArray)([f.default,_.default],(function(){return z.map((function(e){
return e.type===F.ActivityTypes.LISTENING&&null!=t?(0,y.default)(f.default,_.default,t,e):void 0}))}),[t,z]),oe=(0,l.useAnalyticsContext)();if(!ne)return null;var ue=function(n,i){null!=e?o.default.sendActivityInvite({type:n,channelId:e.id,activity:i,location:F.AnalyticsLocations.CONTEXT_MENU}):null!=t&&o.default.sendActivityInviteUser({type:n,userId:t.id,activity:i,location:F.AnalyticsLocations.CONTEXT_MENU})},le=function(){var e=Q(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return u.default.join({userId:t.id,sessionId:n.session_id,applicationId:n.application_id,channelId:g.default.getVoiceChannelId(),messageId:null,intent:x.ActivityIntent.PLAY,embedded:(0,Y.default)(n,F.ActivityFlags.EMBEDDED)});case 2:(0,k.default)({type:F.AnalyticsGameOpenTypes.JOIN,userId:t.id,applicationId:n.application_id,partyId:null===(r=n.party)||void 0===r?void 0:r.id,locationObject:oe.location,analyticsLocations:i})
;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var t=Q(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return(0,U.default)({activity:n,currentEmbeddedApplication:te,activityChannelId:null==e?void 0:e.id,locationObject:oe.location,embeddedActivitiesManager:D.default,analyticsLocations:i});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ce=[];null==X||X.forEach((function(i){null!=i.activity_id&&ce.push(H(c.MenuItem,{id:"invite-to-join-embedded",label:W.default.Messages.USER_ACTIVITY_ACTION_INVITE_TO_JOIN,subtext:i.name,action:function(){!function(i,a){var o=S.default.getChannel(i),u=null==o?void 0:m.default.getGuild(o.guild_id);if(null!=o&&null!=u)null!=t?L.sendEmbeddedActivityInviteUser({channelId:o.id,applicationId:a,userId:t.id,location:F.InstantInviteSources.CONTEXT_MENU
}):null!=e&&e.type===F.ChannelTypes.GUILD_VOICE?(0,P.openModalLazy)(Q(regeneratorRuntime.mark((function t(){var i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return Promise.all([n.e(40532),n.e(15865),n.e(65984),n.e(13557),n.e(67965),n.e(24956),n.e(47295),n.e(48748)]).then(n.bind(n,115865));case 2:i=t.sent;l=i.default;return t.abrupt("return",(function(t){return r.createElement(l,K({},t,{guild:u,channel:o,applicationId:a,analyticsLocation:e.type===F.ChannelTypes.GUILD_VOICE?F.AnalyticsPages.GUILD_CHANNEL:F.AnalyticsPages.DM_CHANNEL,source:F.InstantInviteSources.ACTIVITY_INVITE}))}));case 5:case"end":return t.stop()}}),t)}))),{modalKey:"use-activity-items-embedded-invite-modal"}):null!=(null==e?void 0:e.id)&&L.sendEmbeddedActivityInvite({activityChannelId:o.id,invitedChannelId:e.id,applicationId:a,location:F.InstantInviteSources.CONTEXT_MENU})}(i.channelId,i.application_id)}},"self-embedded-"+i.application_id))}));B.forEach((function(e,t){
e.type===F.ActivityTypes.PLAYING&&(0,Y.default)(e,F.ActivityFlags.JOIN)?ce.push(H(c.MenuItem,{id:"invite-to-join",label:W.default.Messages.USER_ACTIVITY_ACTION_INVITE_TO_JOIN,subtext:e.name,action:function(){return ue(F.ActivityActionTypes.JOIN,e)}},"self"+t)):e.type===F.ActivityTypes.LISTENING&&(0,Y.default)(e,F.ActivityFlags.SYNC)&&ce.push(H(c.MenuItem,{id:"invite-to-listen",label:W.default.Messages.USER_ACTIVITY_ACTION_INVITE_TO_LISTEN_ALONG,subtext:e.name,action:function(){return ue(F.ActivityActionTypes.LISTEN,e)}},"self"+t))}));ce.length>0&&ce.push(ee);z.forEach((function(n,i){if(n.type===F.ActivityTypes.PLAYING&&(0,Y.default)(n,F.ActivityFlags.JOIN)&&null!=n.session_id&&null!=n.application_id)if(re[i]){var r=ie[i];ce.push(H(c.MenuItem,{id:"join",label:r?W.default.Messages.USER_ACTIVITY_JOINING:W.default.Messages.JOIN,disabled:r,hint:r?H(M.default,{type:M.default.Type.PULSING_ELLIPSIS}):null,subtext:n.name,action:function(){return le(n)}},i))}else ce.push(H(c.MenuItem,{
id:"ask-to-join",label:W.default.Messages.USER_ACTIVITY_ACTION_ASK_TO_JOIN,subtext:n.name,action:function(){return ue(F.ActivityActionTypes.JOIN_REQUEST,n)}},i));else if(n.type===F.ActivityTypes.LISTENING&&(0,Y.default)(n,F.ActivityFlags.SYNC)&&null!=ae[i]){var a=ae[i],o=a.notPlayable,u=a.playingSameTrack,l=a.isCurrentUser,d=a.syncingWithUser,f=a.syncingWithParty,y=l||o||u,_=l||d||f;ce.push(H(c.MenuItem,{id:"spotify-play-"+n.session_id,action:function(){return(0,I.default)(a,J.SpotifyActionTypes.USER_ACTIVITY_PLAY)},label:(0,s.default)(a,J.SpotifyActionTypes.USER_ACTIVITY_PLAY),subtext:y?(0,p.default)(a,J.SpotifyActionTypes.USER_ACTIVITY_PLAY,null!=e?j.default.getNickname(e.guild_id,e.id,t):void 0):void 0,disabled:y},"spotify-play-"+n.session_id),H(c.MenuItem,{id:"spotify-sync-"+n.session_id,action:function(){return(0,v.default)(a,J.SpotifyActionTypes.USER_ACTIVITY_SYNC)},label:W.default.Messages.USER_ACTIVITY_LISTEN_ALONG,subtext:_?(0,
p.default)(a,J.SpotifyActionTypes.USER_ACTIVITY_SYNC,null!=e?j.default.getNickname(e.guild_id,e.id,t):void 0):void 0,disabled:_},"spotify-sync-"+n.session_id))}}));Z.forEach((function(e,t){var n,i=e.connections.has(null!==(n=null==$?void 0:$.id)&&void 0!==n?n:""),r=t+z.length,a=ie[r]||i,o=W.default.Messages.EMBEDDED_ACTIVITIES_JOIN_ACTIVITY;i?o=W.default.Messages.USER_ACTIVITY_CANNOT_JOIN_SELF:ie[r]&&(o=W.default.Messages.USER_ACTIVITY_JOINING);re[r]&&ce.push(H(c.MenuItem,{id:"embedded-activity-join-"+e.application_id,label:o,disabled:a,hint:ie[r]?H(M.default,{type:M.default.Type.PULSING_ELLIPSIS}):null,subtext:e.name,action:function(){return de(e)}},"embedded-activity-"+e.application_id))}));return ce}
;var i,r=B(n(667294)),a=n(536211),o=$(n(312260)),u=$(n(234161)),l=n(556470),d=$(n(37039)),c=n(145122),f=$(n(146411)),s=$(n(444743)),p=$(n(601715)),y=$(n(985923)),v=$(n(909630)),I=$(n(669790)),_=$(n(423046)),S=$(n(644263)),A=$(n(311492)),m=$(n(30098)),b=$(n(689389)),T=$(n(788739)),h=$(n(290629)),g=$(n(211136)),O=$(n(690445)),E=$(n(728429)),N=$(n(387692)),C=$(n(361346)),M=$(n(80828)),P=n(194322),j=$(n(29652)),L=B(n(746920)),w=B(n(303798)),U=$(n(516325)),V=$(n(780247)),Y=$(n(351093)),G=$(n(762605)),k=$(n(118685)),R=$(n(93879)),D=$(n(697749)),x=n(418173),F=n(770348),J=n(673810),W=$(n(247001));function $(e){return e&&e.__esModule?e:{default:e}}function X(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(X=function(e){return e?n:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=X(t);if(n&&n.has(e))return n.get(e)
;var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}i.default=e;n&&n.set(e,i);return i}function H(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function K(){K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};return K.apply(this,arguments)}function z(e,t,n,i,r,a,o){try{var u=e[a](o),l=u.value}catch(e){n(e);return}
u.done?t(l):Promise.resolve(l).then(i,r)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){z(a,i,r,o,u,"next",e)}function u(e){z(a,i,r,o,u,"throw",e)}o(void 0)}))}}function q(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i
}var ee=H(c.MenuSeparator,{})}}]);
//# sourceMappingURL=3786d0af9e0642dcc74e.js.map