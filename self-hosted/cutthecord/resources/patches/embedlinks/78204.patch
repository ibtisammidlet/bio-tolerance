Binary files com.discord-base/build/apk/classes.dex and com.discord/build/apk/classes.dex differ
Binary files com.discord-base/dist/com.discord-78204.apk and com.discord/dist/com.discord-78204.apk differ
diff -crB com.discord-base/smali/com/discord/utilities/textprocessing/MessagePreprocessor.smali com.discord/smali/com/discord/utilities/textprocessing/MessagePreprocessor.smali
*** com.discord-base/smali/com/discord/utilities/textprocessing/MessagePreprocessor.smali	2021-05-31 14:05:55.000000000 +0300
--- com.discord/smali/com/discord/utilities/textprocessing/MessagePreprocessor.smali	2021-05-31 18:34:43.000000000 +0300
***************
*** 775,853 ****
  .end method
  
  .method private final stripSimpleEmbedLink(Ljava/util/Collection;)V
!     .locals 3
!     .annotation system Ldalvik/annotation/Signature;
!         value = {
!             "(",
!             "Ljava/util/Collection<",
!             "Lcom/discord/simpleast/core/node/Node<",
!             "Lcom/discord/utilities/textprocessing/MessageRenderContext;",
!             ">;>;)V"
!         }
!     .end annotation
! 
!     .line 1
!     invoke-interface {p1}, Ljava/util/Collection;->size()I
! 
!     move-result v0
! 
!     const/4 v1, 0x1
! 
!     if-ne v0, v1, :cond_2
! 
!     iget-object v0, p0, Lcom/discord/utilities/textprocessing/MessagePreprocessor;->embeds:Ljava/util/List;
! 
!     if-eqz v0, :cond_2
! 
!     invoke-interface {v0}, Ljava/util/List;->size()I
! 
!     move-result v0
! 
!     if-eq v0, v1, :cond_0
! 
!     goto :goto_0
! 
!     :cond_0
!     const/4 v0, 0x0
  
-     .line 2
-     invoke-static {p1, v0}, Ld0/v/u;->elementAt(Ljava/lang/Iterable;I)Ljava/lang/Object;
- 
-     move-result-object v1
- 
-     check-cast v1, Lcom/discord/simpleast/core/node/Node;
- 
-     .line 3
-     iget-object v2, p0, Lcom/discord/utilities/textprocessing/MessagePreprocessor;->embeds:Ljava/util/List;
- 
-     invoke-interface {v2, v0}, Ljava/util/List;->get(I)Ljava/lang/Object;
- 
-     move-result-object v0
- 
-     check-cast v0, Lcom/discord/models/domain/ModelMessageEmbed;
- 
-     .line 4
-     instance-of v1, v1, Lcom/discord/utilities/textprocessing/node/UrlNode;
- 
-     if-nez v1, :cond_1
- 
-     return-void
- 
-     .line 5
-     :cond_1
-     sget-object v1, Lcom/discord/utilities/embed/EmbedResourceUtils;->INSTANCE:Lcom/discord/utilities/embed/EmbedResourceUtils;
- 
-     invoke-virtual {v1, v0}, Lcom/discord/utilities/embed/EmbedResourceUtils;->isSimpleEmbed(Lcom/discord/models/domain/ModelMessageEmbed;)Z
- 
-     move-result v0
- 
-     if-eqz v0, :cond_2
- 
-     .line 6
-     invoke-interface {p1}, Ljava/util/Collection;->clear()V
- 
-     :cond_2
-     :goto_0
      return-void
  .end method
  
--- 775,782 ----
  .end method
  
  .method private final stripSimpleEmbedLink(Ljava/util/Collection;)V
!     .locals 0
  
      return-void
  .end method
  
